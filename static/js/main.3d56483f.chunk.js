(this["webpackJsonpsca-rabbi-schedules"]=this["webpackJsonpsca-rabbi-schedules"]||[]).push([[0],{100:function(e,t,n){},105:function(e,t){},106:function(e,t){},111:function(e,t){},113:function(e,t){},174:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(81),s=n.n(c),u=(n(99),n(100),n(89)),o=n(19),i=n(13),l=n(82),d=n.n(l),h=(function(){var e=new RegExp(/[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_\+.~#?&//=]*)?/gi)}(),function(e){var t=e.schedule,n=t.title,a=t.rows;return r.a.createElement("div",{className:"schedule-card my-5"},r.a.createElement("h1",null,n),r.a.createElement("table",{className:"table table-striped table-bordered table-hover shadow"},r.a.createElement("thead",{className:"text-light"},r.a.createElement("tr",null,a[0].map((function(e){return r.a.createElement("th",null,e)})))),r.a.createElement("tbody",null,a.slice(1).map((function(e){return r.a.createElement("tr",null,e.map((function(e){return r.a.createElement("td",null,function(e){if("string"===typeof e)return e;var t=new Date(86400*(e-25568)*1e3+18e6);return d()(t).format("LT")}(e))})))})))))}),f=n(83),p=n.n(f),m=function(e){var t=e.schedules;return r.a.createElement(r.a.Fragment,null,r.a.createElement("header",{className:"navbar fixed-top bg-light shadow"},r.a.createElement("img",{className:"navbar-brand",src:p.a,alt:"SCA",height:"60"}),r.a.createElement("h5",{className:"w-100 text-center header-title m-0"},"Zoom Class Schedules:")),r.a.createElement("div",{className:"header-spacing"}),r.a.createElement("div",{className:"container"},t.map((function(e){return r.a.createElement(h,{key:e.title,schedule:e})}))))},b=n(45),v=n.n(b),w=n(176),g=n(92),y=function(e){var t=e.onSpreadSheetDropped,n=Object(a.useState)(void 0),c=Object(i.a)(n,2),s=c[0],u=c[1],o=Object(a.useState)(void 0),l=Object(i.a)(o,2),d=l[0],f=l[1],p=Object(a.useCallback)((function(e){var n;if(!/^([a-zA-Z0-9\s_\\.\-:])+(.xls|.xlsx)$/.test(e.name.toLowerCase()))return alert("Only files with .xlsx or .xls extentions are allowed");u(e.name),(n=e,new Promise((function(e){var t=new FileReader;t.onload=function(t){var n=t.target.result,a=v.a.read(n,{type:"array"}),r=a.Sheets[a.SheetNames[0]],c=v.a.utils.sheet_to_json(r),s=Object.keys(c[0]),u=[s].concat(c.map((function(e){return s.map((function(t){return e[t]}))})));e(u)},t.readAsArrayBuffer(n),Object(w.a)(n).then()}))).then((function(e){f(e),t(e)}))}),[t]),m=Object(g.a)({onDrop:function(e){return p(e[0])}}),b=m.getRootProps,y=m.getInputProps;m.isDragActive;return r.a.createElement("div",Object.assign({},b(),{className:"file-dropper scroll-content p-4 my-2"}),r.a.createElement("input",y()),r.a.createElement("p",null,s||"Drop excel file here"),!!d&&r.a.createElement(h,{schedule:{title:"",rows:d}}))},E=function(e){var t=e.schedule,n=e.onDeleteBtnPressed;return r.a.createElement("li",{className:"list-group-item d-flex justify-content-between my-2"},r.a.createElement("h3",null,t.title),r.a.createElement("button",{className:"btn btn-md btn-danger",onClick:n},"x"))},S=function(e){var t=e.schedules,n=e.onNewScheduleTitleSet,a=e.onNewScheduleDataSet,c=e.onUploadBtnPressed,s=e.onScheduleDelete;return r.a.createElement("div",{className:"admin-page-container bg-dark"},r.a.createElement("div",{className:"schedule-manager-widget row mt-5 py-5"},r.a.createElement("div",{className:"col scroll-content"},t.map((function(e,t){return r.a.createElement(E,{key:t,schedule:e,onDeleteBtnPressed:function(){return s(e._id)}})}))),r.a.createElement("div",{className:"col py-2"},r.a.createElement("input",{type:"text",className:"form-control mb-2",placeholder:"Schedule Title",onChange:function(e){return n(e.target.value)}}),r.a.createElement(y,{onSpreadSheetDropped:a}),r.a.createElement("button",{className:"btn btn-success",onClick:c},"Upload Schedule"))))},j=n(6),O=n.n(j),k=n(14),x=n(33),N=n(34),A=function(){function e(t){Object(x.a)(this,e),this.storage=void 0,this.storage=t}return Object(N.a)(e,[{key:"addSchedule",value:function(){var e=Object(k.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.storage.push("schedules",t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"removeSchedule",value:function(){var e=Object(k.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(typeof this),e.abrupt("return",this.storage.delete("schedules",t));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAllSchedules",value:function(){var e=Object(k.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.storage.findAll("schedules");case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=[];case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onSchedulesChanged",value:function(e){console.log(this),this.storage.onChange("schedules",(function(t){return e(t||[])}))}}]),e}();var D=function(e){return new A(e)},C=n(93),I=n(88),T=n.n(I),_=function(){function e(t){Object(x.a)(this,e),this.db=void 0;var n=T.a.initializeApp(t);this.db=n.database()}return Object(N.a)(e,[{key:"read",value:function(){var e=Object(k.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.db.ref(t).once("value").then((function(e){return e.val()})));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"write",value:function(){var e=Object(k.a)(O.a.mark((function e(t,n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.db.ref(t).set(n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"push",value:function(){var e=Object(k.a)(O.a.mark((function e(t,n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.db.ref(t).push(n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"findAll",value:function(){var e=Object(k.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.db.ref(t).once("value").then((function(e){return e.val()||{}})).then(this._convertTsonToArrayWithIds));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(k.a)(O.a.mark((function e(t,n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.db.ref("".concat(t,"/").concat(n)).remove());case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onChange",value:function(e,t){var n=this;this.db.ref(e).on("value",(function(e){return t(n._convertTsonToArrayWithIds(e.val()))}))}},{key:"_convertTsonToArrayWithIds",value:function(e){return Object.entries(e).map((function(e){var t=Object(i.a)(e,2),n=t[0],a=t[1];return Object(C.a)({_id:n},a)}))}}]),e}();var P=D(function(e){return new _(e)}({apiKey:"AIzaSyDUNiNW3dfplmHAq65wfKIGGSHS8MGXgzM",authDomain:"sca-rab-schedules.firebaseapp.com",databaseURL:"https://sca-rab-schedules.firebaseio.com",projectId:"sca-rab-schedules",storageBucket:"sca-rab-schedules.appspot.com",messagingSenderId:"893196040077",appId:"1:893196040077:web:75ee18b5d771028f616fc4"})),B=function(){var e=Object(a.useState)([]),t=Object(i.a)(e,2),n=t[0],c=t[1];return Object(a.useEffect)((function(){P.onSchedulesChanged(c)}),[]),r.a.createElement(m,{schedules:n})},z=function(){var e=Object(a.useState)([]),t=Object(i.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)(void 0),u=Object(i.a)(s,2),o=u[0],l=u[1],d=Object(a.useState)(""),h=Object(i.a)(d,2),f=h[0],p=h[1];Object(a.useEffect)((function(){P.onSchedulesChanged(c)}),[]);return r.a.createElement(S,{schedules:n,onNewScheduleTitleSet:p,onNewScheduleDataSet:l,onUploadBtnPressed:function(){return o?f?void P.addSchedule({title:f,rows:o}):alert("Please enter the title of this table"):alert("Please upload a spreadsheet first")},onScheduleDelete:function(e){return P.removeSchedule(e)}})},W=function(){return r.a.createElement(u.a,{basename:"sca-schedules"},r.a.createElement(o.a,{exact:!0,path:"/",component:B}),r.a.createElement(o.a,{exact:!0,path:"/admin",component:z}))},U=function(){return r.a.createElement(W,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(U,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},51:function(e,t){},83:function(e,t,n){e.exports=n.p+"static/media/SCALogo.b2d06419.png"},94:function(e,t,n){e.exports=n(174)}},[[94,1,2]]]);
//# sourceMappingURL=main.3d56483f.chunk.js.map