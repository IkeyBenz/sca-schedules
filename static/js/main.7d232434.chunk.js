(this["webpackJsonpsca-rabbi-schedules"]=this["webpackJsonpsca-rabbi-schedules"]||[]).push([[0],{26:function(e,t,n){e.exports=n.p+"static/media/spinner.3acec546.gif"},27:function(e,t,n){e.exports=n.p+"static/media/SCALogo.80df96a3.png"},42:function(e,t){},51:function(e,t,n){e.exports=n.p+"static/media/on-air-indicator.fb6b3f3c.png"},52:function(e,t,n){e.exports=n.p+"static/media/sca-white.cbe6bec1.svg"},54:function(e,t,n){e.exports=n(89)},63:function(e,t,n){},76:function(e,t){},77:function(e,t){},89:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(45),i=n.n(c),u=n(21),s=(n(61),n(37),n(62),n(63),n(1)),o=n(14),l=n(15),f=n(46),m=n(13),h=n(19),d=n(24),p=n.n(d),v=(n(33),function(e){return Object.entries(e).map((function(e){var t=Object(s.a)(e,2),n=t[0],a=t[1];return Object(h.a)({_id:n},a)}))}),b=function(e,t){return e[0].findIndex((function(e){return e.toLowerCase().includes(t.toLowerCase())}))},w=function(e,t,n){var a=Object(m.a)(n[0]),r=b(n,e);if(-1===r)return Object(m.a)(n);var c=n.slice(1).filter((function(e){var n=e[r];return n&&!n.toLowerCase().includes(t.toLowerCase())}));return[a].concat(c)},y=function(e,t,n){var a=Object(m.a)(n[0]),r=b(n,e);if(-1===r)return[a];var c=n.slice(1).filter((function(e){var n=e[r];return n&&n.toLowerCase().includes(t.toLowerCase())}));return[a].concat(c)},g=function(e){var t=e.input,n=e.highlight,a=e.row,c=e.passwordCol,i=f.find(t),u=Object(o.g)(),s="";if(~c&&"-"!==a[c]&&(s="Password: ".concat(a[c])),0===i.length)return r.a.createElement("p",{className:n&&"highlight"},t);var l=i[0],m=l.value,h=l.type,d="/"===u.pathname?80:40;return r.a.createElement("span",null,r.a.createElement("a",{href:m,style:{height:d,width:d},className:m.includes("zoom")&&"url"===h?"zoomIcon":m.includes("gotomeeting")&&"url"===h?"gtmIcon":""},"url"===h?"Click here":m)," ",r.a.createElement("p",{className:"password"},s))},E=function(e){var t=e.schedule,n=e.filter,a=t.rows,c=t.logo,i=t.title;console.log(a,i);var u=n?y(n.type,n.match,a):a;if(1===u.length)return null;var s=u[0].reduce((function(e,t,n){return t.toString().toLowerCase().startsWith("hide")&&e.push(n),e}),[]),o=n&&a[0].findIndex((function(e){return e.toLowerCase().includes(n.type)})),l=a[0].findIndex((function(e){return e.toLowerCase().includes("password")})),f=function(e,t){var a=e.toLowerCase();return o===t&&a.includes(n.match)};return r.a.createElement("div",{className:"schedule-card my-2"},r.a.createElement("div",{className:"card-header"},!!c&&r.a.createElement("div",{className:"w-100"},r.a.createElement("img",{src:c,className:"logo ml-4"})),r.a.createElement("h1",{className:"schedule-title"},i)),r.a.createElement("table",{className:"table table-striped table-bordered table-hover shadow"},r.a.createElement("thead",{className:"text-light"},r.a.createElement("tr",null,u[0].map((function(e,t){if(!s.includes(t))return r.a.createElement("th",{key:t},e)})))),r.a.createElement("tbody",null,u.slice(1).map((function(e,t){return r.a.createElement("tr",{key:t},e.map((function(t,n){if(!s.includes(n))return r.a.createElement("td",{key:n},r.a.createElement(g,{input:t,row:e,passwordCol:l,highlight:f(t,n)}))})))})))))},k=(n(28),n(25),n(3)),j=n.n(k),C=n(5),O=n(7),N=n(10),x=function(){function e(t){Object(O.a)(this,e),this.storage=void 0,this.convertTimesToLocalTimezone=function(e){var t=function(e){return p()(e,"h:mm A").local().format("h:mm A")},n=e[0].findIndex((function(e){return e.toLowerCase().includes("time")}));return e.map((function(e,a){var r=Object(m.a)(e);if(a>0){var c=r[n].split("-").map((function(e){return e.trim()}));r[n]=c.map(t).join(" - \n")}return r}))},this.storage=t}return Object(N.a)(e,[{key:"getAllSchedules",value:function(){var t=Object(C.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.storage.read(e.scheduleRef).then(this.makeSchedules));case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"onSchedulesChanged",value:function(t){var n=this;this.storage.onChange(e.scheduleRef,(function(e){t(n.makeSchedules(e))}))}},{key:"makeSchedules",value:function(e){var t=b(e,"join");e.forEach((function(e){e[t].includes("zoom")&&(e[t]=function(e){if(!e.includes("/j/"))return e;var t=e.split("/j/"),n=Object(s.a)(t,2),a=n[0],r=n[1].split("?"),c=Object(s.a)(r,1)[0];return"".concat(a,"/wc/join/").concat(c)}(e[t]))}));var n=y("toggle","show",e);return{todaysClasses:function(e){var t=e[0].findIndex((function(e){return e.toLowerCase().includes("day")}));return-1===t?e:e.map((function(e){return e.filter((function(e,n){return t!==n}))}))}(function(e){var t=e.length>0&&e[0].findIndex((function(e){return e.toLowerCase().includes("days")}));if(!t||-1===t)return e;var n=new Date,a=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return e.filter((function(e,r){var c=0===r,i=e[t];if(i.toLowerCase().includes("daily"))c=!0;else if(i.includes(a[n.getDay()]))c=!0;else if(i.includes("-")){i.split(/[^\w-]/).forEach((function(e){if(e.includes("-")){var t=e.split("-"),r=a.findIndex((function(e){return t[0].includes(e)})),i=a.findIndex((function(e){return t[1].includes(e)}));r<n.getDay()&&i>n.getDay()&&(c=!0)}}))}return c}))}(w("type","minyan",n))),minyanim:y("type","minyan",n),fullSchedule:n}}}]),e}();x.scheduleRef="1TS3fZHRPlhI4L_URhKJXGa48eOy6BiqM1GeSUJL9jFs/live-website-feed";var A=function(e){return new x(e)},S=function(){function e(t){Object(O.a)(this,e),this.storage=void 0,this.storage=t}return Object(N.a)(e,[{key:"addAttachment",value:function(){var e=Object(C.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.storage.push("attachments",t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"removeAttachment",value:function(){var e=Object(C.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.storage.delete("attachments",t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateAttachment",value:function(){var e=Object(C.a)(j.a.mark((function e(t,n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.storage.write("attachments/".concat(t),n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getAllAttachments",value:function(){var e=Object(C.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,this.storage.findAll("attachments");case 3:return e.t1=e.sent,e.abrupt("return",e.t0._alphabetize.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onAttachmentsChanged",value:function(e){var t=this;this.storage.onChange("attachments",(function(n){return e(t._alphabetize(v(n)))}))}},{key:"_alphabetize",value:function(e){return e?e.sort((function(e,t){return e.title>t.title?1:e.title<t.title?-1:0})):[]}}]),e}();var L=function(e){return new S(e)},I=n(50),z=n.n(I),T=(n(86),n(90),function(){function e(t){Object(O.a)(this,e),this.db=void 0,this.storage=void 0;var n=z.a.initializeApp(t);this.db=n.database(),this.storage=n.storage()}return Object(N.a)(e,[{key:"read",value:function(){var e=Object(C.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.db.ref(t).once("value").then((function(e){return e.val()})));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"write",value:function(){var e=Object(C.a)(j.a.mark((function e(t,n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.db.ref(t).set(n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"push",value:function(){var e=Object(C.a)(j.a.mark((function e(t,n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.db.ref(t).push(n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"findAll",value:function(){var e=Object(C.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.db.ref(t).once("value").then((function(e){return e.val()||{}})).then(v));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(C.a)(j.a.mark((function e(t,n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.db.ref("".concat(t,"/").concat(n)).remove());case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onChange",value:function(e,t){this.db.ref(e).on("value",(function(e){return t(e.val())}))}}]),e}());var F=function(e){return new T(e)},D=function(){function e(t){Object(O.a)(this,e),this.storage=void 0,this.storage=t}return Object(N.a)(e,[{key:"addForm",value:function(){var e=Object(C.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.storage.push("tehillim",t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"removeForm",value:function(){var e=Object(C.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.storage.delete("tehillim",t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateForm",value:function(){var e=Object(C.a)(j.a.mark((function e(t,n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.storage.write("tehillim/".concat(t),n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getAllForms",value:function(){var e=Object(C.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,this.storage.findAll("tehillim");case 3:return e.t1=e.sent,e.abrupt("return",e.t0._alphabetize.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onFormsChanged",value:function(e){var t=this;this.storage.onChange("tehillim",(function(n){return e(t._alphabetize(v(n)))}))}},{key:"_alphabetize",value:function(e){return e?e.sort((function(e,t){return e.firstName>t.firstName?1:e.firstName<t.firstName?-1:0})):[]}}]),e}();var M=function(e){return new D(e)},_=F({apiKey:"AIzaSyDUNiNW3dfplmHAq65wfKIGGSHS8MGXgzM",authDomain:"sca-rab-schedules.firebaseapp.com",databaseURL:"https://sca-rab-schedules.firebaseio.com",projectId:"sca-rab-schedules",storageBucket:"sca-rab-schedules.appspot.com",messagingSenderId:"893196040077",appId:"1:893196040077:web:75ee18b5d771028f616fc4"}),B=A(_),R=(L(_),M(_),n(26),n(6)),U=n.n(R),W=function(e){var t=e.schedule,n=e.filter,a=t.rows,c=a[0];if(a.length<2)return null;var i=c.findIndex((function(e){return e.toLowerCase().includes("time")}));if(-1===i)return r.a.createElement(E,{schedule:{title:"",rows:a}});var u=new Date,s=[],o=[],l=[];return a.forEach((function(e){var t=e[i].match(/\d\d?:\d\d ?(?:[AP]M)?/g);if(!t)return!1;!t[0].toLowerCase().includes("pm")&&e[i].toLowerCase().includes("pm")&&(t[0]+=" pm");var n=U()(t[0],"h:mm:ss a"),a=t.length>1?U()(t[1],"h:mm:ss a"):U()(n).add(1,"h");n.subtract(10,"m"),U()(u).isBetween(n,a,null,"[)")?s.push(e):U()(u).isSameOrAfter(a)?o.push(e):U()(u).isBefore(n)&&l.push(e)})),r.a.createElement("div",null,s.length>0&&r.a.createElement(E,{schedule:{rows:[c].concat(s),title:"Ongoing ".concat(t.title)},filter:n}),l.length>0&&r.a.createElement(E,{schedule:{rows:[c].concat(l),title:"Upcoming ".concat(t.title)},filter:n}),o.length>0&&r.a.createElement(E,{schedule:{rows:[c].concat(o),title:"Elapsed ".concat(t.title)},filter:n}))},G=(n(53),n(88),n(51),n(27),n(52),function(e){var t=e.todaysClasses,n=e.minyanim,c=e.fullSchedule,i=Object(a.useState)("none"),u=Object(s.a)(i,2),l=u[0],f=u[1],m=Object(a.useState)(""),h=Object(s.a)(m,2),d=h[0],p=h[1],v=Object(o.g)(),w=Object(a.useCallback)((function(){var e=[],t=b(c,"teacher"),n=c.map((function(e){return e[t]}));return e=e.concat(n),Array.from(new Set(e)).sort()}),[c]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"container pb-5"},r.a.createElement("div",{className:"row"},r.a.createElement("ul",{className:"nav nav-pills nav-justified m-3 w-100"},r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{href:"/sca-schedules/#/today",className:v.pathname.includes("/today")?"nav-link active":"nav-link"},"Today's Classes")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{href:"/sca-schedules/#/minyanim",className:v.pathname.includes("/minyanim")?"nav-link active":"nav-link"},"Minyanim")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{href:"/sca-schedules/#/classes",className:v.pathname.includes("/classes")?"nav-link active":"nav-link"},"Full Schedule")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{href:"https://www.youtube.com/channel/UCsHn2xQEscv11QaNHpPf37A",target:"_blank",rel:"noopener noreferrer",className:"nav-link"},"Recordings"))))),c.length>0&&r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"/minyanim"===v.pathname?"d-none":"row"},r.a.createElement("div",{className:"input-group mt-3 mx-3"},r.a.createElement("label",{htmlFor:"filter",className:"header-title"},"Filter By:"," ",r.a.createElement("select",{name:"filter",onChange:function(e){f(e.target.value),p("")},id:"",value:l},r.a.createElement("option",{value:"none"},"No filter"),r.a.createElement("option",{value:"time"},"Time of day"),"/today"!==v.pathname&&r.a.createElement("option",{value:"day"},"Day of week"),r.a.createElement("option",{value:"topic"},"Topic"),r.a.createElement("option",{value:"teacher"},"Teacher")),"none"!==l&&("day"===l?r.a.createElement("select",{className:"ml-2",onChange:function(e){return p(e.target.value)}},r.a.createElement("option",{value:""},"Choose Day"),r.a.createElement("option",{value:"mon"},"Mon"),r.a.createElement("option",{value:"tues"},"Tues"),r.a.createElement("option",{value:"wed"},"Wed"),r.a.createElement("option",{value:"thurs"},"Thurs"),r.a.createElement("option",{value:"fri"},"Fri"),r.a.createElement("option",{value:"sun"},"Sun")):"time"===l?r.a.createElement("select",{className:"ml-2",onChange:function(e){return p(e.target.value.toLowerCase())}},r.a.createElement("option",{value:""},"Choose Time"),function(){if(0===c.length)return[];var e=/\d\d?:\d\d ([AP]M)/,t=b(c,"time"),n=-1===t?[]:c.map((function(e){return e[t]})).filter((function(t){return e.test(t)})).map((function(t){return t.match(e)[0]}));return Array.from(new Set(n)).sort((function(e,t){var n=new Date("1970/01/01 ".concat(e)),a=new Date("1970/01/01 ".concat(t));return n>a?1:n<a?-1:0}))}().map((function(e){return r.a.createElement("option",{value:e},e)}))):"teacher"===l?r.a.createElement("select",{className:"ml-2",onChange:function(e){return p(e.target.value.toLowerCase())}},r.a.createElement("option",{value:""},"Choose Teacher"),w().map((function(e){return r.a.createElement("option",{value:e},e)}))):r.a.createElement("input",{type:"text",className:"ml-2",onChange:function(e){return p(e.target.value.toLowerCase())},placeholder:"Enter ".concat(l,"(s)")}))))),"/today"===v.pathname&&r.a.createElement(W,{schedule:{title:"Classes",rows:t},filter:!("none"===l||""===d)&&{type:l,match:d}}),"/minyanim"===v.pathname&&r.a.createElement(E,{schedule:{title:"Minyanim",rows:n}}),"/classes"===v.pathname&&r.a.createElement(E,{schedule:{title:"Classes & Minyanim",rows:c},filter:!("none"===l||""===d)&&{type:l,match:d}})))}),H=function(){var e={todaysClasses:Array(20).fill(Array(6).fill("")),minyanim:Array(20).fill(Array(6).fill("")),fullSchedule:Array(20).fill(Array(6).fill(""))},t=Object(a.useState)(e),n=Object(s.a)(t,2),c=n[0],i=c.todaysClasses,u=c.minyanim,o=c.fullSchedule,l=n[1];return Object(a.useEffect)((function(){B.onSchedulesChanged(l)}),[]),r.a.createElement(G,{todaysClasses:i,minyanim:u,fullSchedule:o})},P=function(){var e=Object(o.f)();return Object(a.useEffect)((function(){return e.listen((function(e){u.a.pageview(e.pathname)}))}),[e]),null},J=function(){return r.a.createElement(l.a,{basename:"sca-schedules"},r.a.createElement(P,null),r.a.createElement(o.a,{from:"/",to:"/today"}),r.a.createElement(o.b,{path:"/today",component:H}),r.a.createElement(o.b,{path:"/minyanim",component:H}),r.a.createElement(o.b,{path:"/classes",component:H}))},K=function(){return r.a.createElement(J,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.initialize("UA-164561407-1"),i.a.render(r.a.createElement(K,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[54,1,2]]]);
//# sourceMappingURL=main.7d232434.chunk.js.map