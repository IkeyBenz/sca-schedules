(this["webpackJsonpsca-rabbi-schedules"]=this["webpackJsonpsca-rabbi-schedules"]||[]).push([[0],{29:function(e,t){},39:function(e,t,n){e.exports=n(67)},45:function(e,t,n){},50:function(e,t){},51:function(e,t){},67:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(31),u=n.n(c),s=(n(44),n(45),n(34)),o=n(13),i=n(12),l=function(e){var t=e.schedule,n=t.title,r=t.rows;return a.a.createElement("div",null,a.a.createElement("h1",null,n),a.a.createElement("table",{className:"table"},a.a.createElement("thead",null,a.a.createElement("tr",null,r[0].map((function(e){return a.a.createElement("th",null,e)})))),r.slice(1).map((function(e){return a.a.createElement("tr",null,e.map((function(e){return a.a.createElement("td",null,e)})))}))))},h=function(e){var t=e.schedules;return a.a.createElement("div",{className:"container"},a.a.createElement("h1",null,"Hello there!"),t.map((function(e){return a.a.createElement(l,{key:e.title,schedule:e})})))},d=n(24),f=n.n(d),p=n(37),m=function(e){var t=e.onSpreadSheetDropped,n=Object(r.useCallback)((function(e){var n;if(!/^([a-zA-Z0-9\s_\\.\-:])+(.xls|.xlsx)$/.test(e.name.toLowerCase()))return alert("Only files with .xlsx or .xls extentions are allowed");(n=e,new Promise((function(e){var t=new FileReader;t.onload=function(t){var n=t.target.result,r=f.a.read(n,{type:"array"}),a=r.Sheets[r.SheetNames[0]],c=f.a.utils.sheet_to_json(a),u=Object.keys(c[0]),s=[u].concat(c.map((function(e){return u.map((function(t){return e[t]}))})));e(s)},t.onerror=function(e){console.log(e)},t.readAsArrayBuffer(n)}))).then(t)}),[t]),c=Object(p.a)({onDrop:function(e){return n(e[0])}}),u=c.getRootProps,s=c.getInputProps,o=c.isDragActive;return a.a.createElement("div",Object.assign({},u(),{className:"file-dropper"}),a.a.createElement("input",s()),o?a.a.createElement("p",null,"Drop spreadsheet here"):a.a.createElement("p",null,"SpreadSheet Uploader"))},b=function(e){var t=e.schedule,n=e.onDeleteBtnPressed;return a.a.createElement("div",{className:"justify-content-between m-2 row"},a.a.createElement("h3",null,t.title," (",t._id,")"),a.a.createElement("button",{className:"btn btn-md btn-danger",onClick:n},"x"))},v=function(e){var t=e.schedules,n=e.onNewScheduleTitleSet,r=e.onNewScheduleDataSet,c=e.onUploadBtnPressed,u=e.onScheduleDelete;return a.a.createElement("div",{className:"admin-page-container"},a.a.createElement("div",{className:"schedule-manager-widget row"},a.a.createElement("div",{className:"col scroll-content"},t.map((function(e,t){return a.a.createElement(b,{key:t,schedule:e,onDeleteBtnPressed:function(){return u(e._id)}})}))),a.a.createElement("div",{className:"col p-0"},a.a.createElement("input",{type:"text",className:"form-control",placeholder:"Schedule Title",onChange:function(e){return n(e.target.value)}}),a.a.createElement(m,{onSpreadSheetDropped:r}),a.a.createElement("button",{className:"btn btn-success",onClick:c},"Upload Schedule"))))},w=n(5),y=n.n(w),E=n(10),S=n(19),g=n(20),j=function(){function e(t){Object(S.a)(this,e),this.storage=void 0,this.storage=t}return Object(g.a)(e,[{key:"addSchedule",value:function(){var e=Object(E.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.storage.push("schedules",t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"removeSchedule",value:function(){var e=Object(E.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(typeof this),e.abrupt("return",this.storage.delete("schedules",t));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAllSchedules",value:function(){var e=Object(E.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.storage.findAll("schedules");case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=[];case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onSchedulesChanged",value:function(e){console.log(this),this.storage.onChange("schedules",(function(t){return e(t||[])}))}}]),e}();var k=function(e){return new j(e)},O=n(38),x=n(33),N=n.n(x),A=function(){function e(t){Object(S.a)(this,e),this.db=void 0;var n=N.a.initializeApp(t);this.db=n.database()}return Object(g.a)(e,[{key:"read",value:function(){var e=Object(E.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.db.ref(t).once("value").then((function(e){return e.val()})));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"write",value:function(){var e=Object(E.a)(y.a.mark((function e(t,n){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.db.ref(t).set(n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"push",value:function(){var e=Object(E.a)(y.a.mark((function e(t,n){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.db.ref(t).push(n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"findAll",value:function(){var e=Object(E.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.db.ref(t).once("value").then((function(e){return e.val()||{}})).then(this._convertTsonToArrayWithIds));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(E.a)(y.a.mark((function e(t,n){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.db.ref("".concat(t,"/").concat(n)).remove());case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onChange",value:function(e,t){var n=this;this.db.ref(e).on("value",(function(e){return t(n._convertTsonToArrayWithIds(e.val()))}))}},{key:"_convertTsonToArrayWithIds",value:function(e){return Object.entries(e).map((function(e){var t=Object(i.a)(e,2),n=t[0],r=t[1];return Object(O.a)({_id:n},r)}))}}]),e}();var D=k(function(e){return new A(e)}({apiKey:"AIzaSyDUNiNW3dfplmHAq65wfKIGGSHS8MGXgzM",authDomain:"sca-rab-schedules.firebaseapp.com",databaseURL:"https://sca-rab-schedules.firebaseio.com",projectId:"sca-rab-schedules",storageBucket:"sca-rab-schedules.appspot.com",messagingSenderId:"893196040077",appId:"1:893196040077:web:75ee18b5d771028f616fc4"})),C=function(){var e=Object(r.useState)([]),t=Object(i.a)(e,2),n=t[0],c=t[1];return Object(r.useEffect)((function(){D.onSchedulesChanged(c)}),[]),a.a.createElement(h,{schedules:n})},I=function(){var e=Object(r.useState)([]),t=Object(i.a)(e,2),n=t[0],c=t[1],u=Object(r.useState)(void 0),s=Object(i.a)(u,2),o=s[0],l=s[1],h=Object(r.useState)(""),d=Object(i.a)(h,2),f=d[0],p=d[1];Object(r.useEffect)((function(){D.onSchedulesChanged(c)}),[]);return a.a.createElement(v,{schedules:n,onNewScheduleTitleSet:p,onNewScheduleDataSet:l,onUploadBtnPressed:function(){return o?f?void D.addSchedule({title:f,rows:o}):alert("Please enter the title of this table"):alert("Please upload a spreadsheet first")},onScheduleDelete:function(e){return D.removeSchedule(e)}})},P=function(){return a.a.createElement(s.a,{basename:"sca-schedules"},a.a.createElement(o.a,{exact:!0,path:"/",component:C}),a.a.createElement(o.a,{exact:!0,path:"/admin",component:I}))},T=function(){return a.a.createElement(P,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(a.a.createElement(T,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[39,1,2]]]);
//# sourceMappingURL=main.62f0c141.chunk.js.map