(this["webpackJsonpsca-rabbi-schedules"]=this["webpackJsonpsca-rabbi-schedules"]||[]).push([[0],{35:function(e,t){},45:function(e,t,n){e.exports=n.p+"static/media/SCALogo.b2d06419.png"},47:function(e,t,n){e.exports=n(81)},53:function(e,t,n){},64:function(e,t){},65:function(e,t){},81:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(37),u=n.n(c),o=(n(52),n(53),n(42)),l=n(13),i=n(6),s=n(38),d=n(46),f=n(23),h=n(39),p=n.n(h),m=n(28),v=n.n(m),b=function(e){return e.map((function(e){return e.map((function(e){return function(e){if("string"===typeof e)return e;var t=new Date(86400*(e-25568)*1e3+18e6);return p()(t).format("LT")}(e)}))}))},g=function(e){return Object.entries(e).map((function(e){var t=Object(i.a)(e,2),n=t[0],a=t[1];return Object(f.a)({_id:n},a)}))},E=function(e){var t=e.input,n=e.highlight,a=s.find(t);if(0===a.length)return r.a.createElement("p",{className:n&&"highlight"},t);var c=a[0],u=c.value,o=c.type;return r.a.createElement("a",{href:u},"url"===o?"Click me":u)},w=function(e){var t=e.schedule,n=e.filter,a=t.title,c=t.rows,u=t.logo,o=n?function(e,t,n){var a=Object(d.a)(n[0]),r=a.findIndex((function(t){return t.toLowerCase().includes(e)}));if(-1===r)return[a];var c=n.slice(1).filter((function(n){var a=n[r];return"time"===e&&(a=a.replace(":","")),a.toLowerCase().includes(t.toLowerCase())}));return[a].concat(c)}(n.type,n.match,c):c;if(1===o.length)return null;var l=n&&c[0].findIndex((function(e){return e.toLowerCase().includes(n.type)})),i=function(e,t){var a=e.toLowerCase();return l===t&&("time"===n.type?a.replace(":","").includes(n.match):a.includes(n.match))};return r.a.createElement("div",{className:"schedule-card my-5"},r.a.createElement("div",{className:"card-header row"},!!u&&r.a.createElement("img",{src:u,className:"logo"}),r.a.createElement("h1",{className:"schedule-title"},a)),r.a.createElement("table",{className:"table table-striped table-bordered table-hover shadow"},r.a.createElement("thead",{className:"text-light"},r.a.createElement("tr",null,o[0].map((function(e,t){return r.a.createElement("th",{key:t},e)})))),r.a.createElement("tbody",null,o.slice(1).map((function(e,t){return r.a.createElement("tr",{key:t},e.map((function(e,t){return r.a.createElement("td",{key:t},r.a.createElement(E,{input:e,highlight:i(e,t)}))})))})))))},y=n(22),j=function(e){var t=e.onSpreadSheetDropped,n=e.currentSpreadSheet,c=Object(a.useState)(void 0),u=Object(i.a)(c,2),o=u[0],l=u[1],s=Object(a.useState)(void 0),d=Object(i.a)(s,2),f=d[0],h=d[1];Object(a.useEffect)((function(){return h(n)}),[n]);var p=Object(y.a)({onDrop:function(e){var n,a=e[0];if(!/^([a-zA-Z0-9\s_\\.\-:])+(.xls|.xlsx)$/.test(a.name.toLowerCase()))return alert("Only files with .xlsx or .xls extentions are allowed here.");l(a.name),(n=a,new Promise((function(e){var t=new FileReader;t.onload=function(t){var n=t.target.result,a=v.a.read(n,{type:"array"}),r=a.Sheets[a.SheetNames[0]],c=v.a.utils.sheet_to_json(r),u=Object.keys(c[0]),o=[u].concat(c.map((function(e){return u.map((function(t){return e[t]}))})));e(b(o))},t.readAsArrayBuffer(n)}))).then((function(e){h(e),t(e)}))}}),m=p.getRootProps,g=p.getInputProps;p.isDragActive;return r.a.createElement("div",Object.assign({},m(),{className:"file-dropper scroll-content p-4 my-2"}),r.a.createElement("input",g()),!o&&r.a.createElement("p",null,"Drop excel file here",r.a.createElement("br",null),"(or click to choose file)"),!!o&&r.a.createElement("p",null,o),!!f&&r.a.createElement(w,{schedule:{title:"",rows:f}}))},O=function(e){var t=e.onImageDropped,n=e.currentImage,c=Object(a.useState)(n),u=Object(i.a)(c,2),o=u[0],l=u[1];Object(a.useEffect)((function(){return l(n)}),[n]);var s=Object(y.a)({onDrop:function(e){var n,a=e[0];if(!/^([a-zA-Z0-9\s_\\.\-:])+(.jpg|.jpeg|.png)$/.test(a.name.toLowerCase()))return alert("Only files with .jpg or .jpeg or .png extensions are allowed here.");(n=a,new Promise((function(e){var t=new FileReader;t.onloadend=function(t){e(t.target.result)},t.readAsDataURL(n)}))).then((function(e){l(e),t(e)}))}}),d=s.getRootProps,f=s.getInputProps;s.isDragActive;return r.a.createElement("div",Object.assign({},d(),{className:"image-dropper mt-2"}),r.a.createElement("input",f()),r.a.createElement("p",null,"Drop logo here",r.a.createElement("br",null),"(or click to choose file)"),!!o&&r.a.createElement("img",{src:o,className:"logo"}))},S=function(e){var t=e.schedules,n=Object(a.useState)("none"),c=Object(i.a)(n,2),u=c[0],o=c[1],l=Object(a.useState)(""),s=Object(i.a)(l,2),d=s[0],f=s[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"input-group mt-3"},r.a.createElement("label",{htmlFor:"filter",className:"header-title"},"Filter By:"," ",r.a.createElement("select",{name:"filter",onChange:function(e){return o(e.target.value)},id:"",value:u},r.a.createElement("option",{value:"none"},"No filter"),r.a.createElement("option",{value:"time"},"Time of day"),r.a.createElement("option",{value:"day"},"Day of week"),r.a.createElement("option",{value:"class"},"Class"),r.a.createElement("option",{value:"rabbi"},"Rabbi")),"none"!==u&&r.a.createElement("input",{type:"text",className:"ml-2",onChange:function(e){return f(e.target.value.toLowerCase())},placeholder:"Enter ".concat(u,"(s)")}))),t.map((function(e){return r.a.createElement(w,{key:e.title,schedule:e,filter:!("none"===u||""===d)&&{type:u,match:d}})}))))},k=function(e){var t=e.schedule,n=e.isEditing,a=e.onUpdateBtnPressed,c=e.onDeleteBtnPressed;return r.a.createElement("li",{className:"list-group-item d-flex justify-content-between my-2"},r.a.createElement("h3",null,t.title),n?r.a.createElement("button",{className:"btn btn-danger m-1",onClick:c},"x"):r.a.createElement("button",{className:"btn btn-warning",onClick:a},r.a.createElement("i",{className:"fas fa-edit text-light"})))},x=function(e){var t=e.schedules,n=e.createSchedule,c=e.deleteSchedule,u=e.updateSchedule,o=Object(a.useState)(void 0),l=Object(i.a)(o,2),s=l[0],d=l[1],h=function(e){return d(Object(f.a)({},s,{},e))};return Object(a.useEffect)((function(){console.log(s)}),[s]),r.a.createElement("div",{className:"admin-page-container"},r.a.createElement("div",{className:"schedule-manager-widget row mt-5 py-5"},r.a.createElement("div",{className:"col scroll-content"},t.map((function(e,t){return r.a.createElement(k,{key:t,schedule:e,isEditing:(null===s||void 0===s?void 0:s._id)===e._id,onUpdateBtnPressed:function(){return d(e)},onDeleteBtnPressed:function(){return c(e._id)}})}))),r.a.createElement("div",{className:"col schedule-upload-container"},r.a.createElement("div",{className:"text-center"},r.a.createElement("h3",{className:"text-light"},s?"Update Schedule:":"Upload Schedule Here:")),r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Schedule Title",value:(null===s||void 0===s?void 0:s.title)||"",onChange:function(e){return h({title:e.target.value})}}),r.a.createElement(O,{onImageDropped:function(e){return h({logo:e})},currentImage:null===s||void 0===s?void 0:s.logo}),r.a.createElement(j,{onSpreadSheetDropped:function(e){return h({rows:e})},currentSpreadSheet:null===s||void 0===s?void 0:s.rows}),r.a.createElement("button",{className:"btn btn-success",onClick:function(){var e={title:s.title,rows:s.rows,logo:s.logo};s._id?u(s._id,e):n(e),d(void 0)}},(null===s||void 0===s?void 0:s._id)?"Save updates":"Upload Schedule"))))},N=n(4),C=n.n(N),D=n(11),A=n(20),I=n(21),_=function(){function e(t){Object(A.a)(this,e),this.storage=void 0,this.storage=t}return Object(I.a)(e,[{key:"addSchedule",value:function(){var e=Object(D.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.storage.push("schedules",t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"removeSchedule",value:function(){var e=Object(D.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.storage.delete("schedules",t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateSchedule",value:function(){var e=Object(D.a)(C.a.mark((function e(t,n){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.storage.write("schedules/".concat(t),n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getAllSchedules",value:function(){var e=Object(D.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,this.storage.findAll("schedules");case 3:return e.t1=e.sent,e.abrupt("return",e.t0._alphabetize.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onSchedulesChanged",value:function(e){var t=this;this.storage.onChange("schedules",(function(n){return e(t._alphabetize(n))}))}},{key:"_alphabetize",value:function(e){return e?e.sort((function(e,t){return e.title>t.title?1:e.title<t.title?-1:0})):[]}}]),e}();var L=function(e){return new _(e)},P=n(41),B=n.n(P),z=function(){function e(t){Object(A.a)(this,e),this.db=void 0;var n=B.a.initializeApp(t);this.db=n.database()}return Object(I.a)(e,[{key:"read",value:function(){var e=Object(D.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.db.ref(t).once("value").then((function(e){return e.val()})));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"write",value:function(){var e=Object(D.a)(C.a.mark((function e(t,n){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.db.ref(t).set(n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"push",value:function(){var e=Object(D.a)(C.a.mark((function e(t,n){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.db.ref(t).push(n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"findAll",value:function(){var e=Object(D.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.db.ref(t).once("value").then((function(e){return e.val()||{}})).then(g));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(D.a)(C.a.mark((function e(t,n){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.db.ref("".concat(t,"/").concat(n)).remove());case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onChange",value:function(e,t){this.db.ref(e).on("value",(function(e){return t(g(e.val()))}))}}]),e}();var U=L(function(e){return new z(e)}({apiKey:"AIzaSyDUNiNW3dfplmHAq65wfKIGGSHS8MGXgzM",authDomain:"sca-rab-schedules.firebaseapp.com",databaseURL:"https://sca-rab-schedules.firebaseio.com",projectId:"sca-rab-schedules",storageBucket:"sca-rab-schedules.appspot.com",messagingSenderId:"893196040077",appId:"1:893196040077:web:75ee18b5d771028f616fc4"})),R=function(){var e=Object(a.useState)([]),t=Object(i.a)(e,2),n=t[0],c=t[1];return Object(a.useEffect)((function(){U.onSchedulesChanged(c)}),[]),r.a.createElement(S,{schedules:n})},F=function(){var e=Object(a.useState)([]),t=Object(i.a)(e,2),n=t[0],c=t[1];Object(a.useEffect)((function(){U.onSchedulesChanged(c)}),[]);return r.a.createElement(x,{schedules:n,createSchedule:function(e){return e.rows?e.title?U.addSchedule(e):alert("Please enter the title of this table"):alert("Please upload a spreadsheet first")},updateSchedule:function(e,t){return U.updateSchedule(e,t)},deleteSchedule:function(e){return U.removeSchedule(e)}})},G=function(){return r.a.createElement(o.a,null,r.a.createElement(l.a,{exact:!0,path:"/",component:R}),r.a.createElement(l.a,{exact:!0,path:"/admin",component:F}))},H=n(45),T=n.n(H),W=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("header",{className:"navbar fixed-top bg-light shadow"},r.a.createElement("img",{className:"navbar-brand py-0",src:T.a,alt:"SCA",height:"60"}),r.a.createElement("h5",{className:"w-100 text-center header-title m-0"},"Zoom Class Schedules:")),r.a.createElement("div",{className:"header-spacing"}),r.a.createElement(G,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(r.a.createElement(W,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[47,1,2]]]);
//# sourceMappingURL=main.efbdd606.chunk.js.map