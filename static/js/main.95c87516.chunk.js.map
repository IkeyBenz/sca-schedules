{"version":3,"sources":["ui/assets/spinner.gif","ui/assets/SCALogo.png","ui/assets/on-air-indicator.png","ui/assets/sca-white.svg","util.ts","ui/components/ScheduleCard.tsx","service/ScheduleService.ts","service/AttachmentService.ts","service/DatabaseService.ts","service/FormService.ts","service/index.ts","ui/components/LiveItems.tsx","ui/screens/Classes.tsx","factory/ClassesScreenCreator.tsx","AppNavigator.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["module","exports","convertJsonToArrayWithIds","obj","Object","entries","map","_id","val","excludeFilterDataFrameRows","filterType","filterVal","data","header","searchableColIndex","getColumnIdxOfKey","filteredRows","slice","filter","row","cellText","toLowerCase","includes","concat","filterDataFrameRows","key","findIndex","currKey","SmartText","input","highlight","passwordCol","urls","linkify","location","useLocation","password","length","className","value","type","iconSize","pathname","href","style","height","width","ScheduleCard","schedule","rows","logo","path","split","title","minyanim","classes","today","match","filteredCols","reduce","acc","cur","idx","toString","startsWith","push","filterColIdx","col","passwordColIdx","shouldHighlight","colText","colIdx","text","src","rIdx","cIdx","ScheduleService","database","storage","convertTimesToLocalTimezone","adjustTime","time","moment","local","format","idxOfTime","i","newRow","timeRange","trim","join","this","read","scheduleRef","then","cb","onChange","createScheduleManager","persistedStorage","AttachmentService","attachment","delete","newAttachment","write","findAll","_alphabetize","attachments","sort","a","b","createAttachmentManager","FirebaseManager","config","db","app","firebase","initializeApp","ref","once","s","set","basePath","remove","on","createFirebaseDbManager","FormService","form","newForm","tehillim","firstName","createFormManager","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","scheduleManager","LiveItems","schedules","heading","forEach","headerRows","dayIdx","timeIdx","passwordIdx","days","now","Date","filteredByDay","flag","rowDays","getDay","rowDay","leftRight","left","v","right","live","elapsed","upcoming","rowTimes","startTime","endTime","add","subtract","isBetween","isSameOrAfter","isBefore","rowId","cell","cellId","ClassesScreen","useState","setfilterType","setFilterVal","setHeading","useEffect","calcAvailableTimes","useCallback","validTime","times","moreTimes","test","Array","from","Set","_a","_b","calcTeachers","teachers","target","rel","htmlFor","name","e","id","placeholder","ClassesScreenCreator","setSchedules","onSchedulesChanged","Classes","CompThatTracksLocation","history","useHistory","listen","ReactGa","pageview","NavigatorForWix","to","component","App","AppNavigator","Boolean","window","hostname","initialize","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","error","console","message"],"mappings":"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","file":"static/js/main.95c87516.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/spinner.3acec546.gif\";","module.exports = __webpack_public_path__ + \"static/media/SCALogo.80df96a3.png\";","module.exports = __webpack_public_path__ + \"static/media/on-air-indicator.fb6b3f3c.png\";","module.exports = __webpack_public_path__ + \"static/media/sca-white.cbe6bec1.svg\";","import moment from 'moment-timezone';\nimport xlsx from 'xlsx';\n\n\nexport const dataframeFromExcelFile = (excelFile: File) =>\n  new Promise<DataFrame>(resolve => {\n    var reader = new FileReader();\n\n    reader.onload = function(e) {\n      const data = e.target.result;\n      const workbook = xlsx.read(data, { type: 'array' });\n      const spreadSheet = workbook.Sheets[workbook.SheetNames[0]];\n\n      const rowObjs = xlsx.utils.sheet_to_json(spreadSheet);\n      const header = Object.keys(rowObjs[0]);\n      const rows: DataFrame = [header].concat(\n        rowObjs.map(obj => header.map(key => obj[key])),\n      );\n      resolve(cleanExcelData(rows));\n    };\n\n    reader.readAsArrayBuffer(excelFile);\n  });\n\nexport const convertImageFileToBase64Str = (image: File) => \n  new Promise<string | ArrayBuffer>(resolve => {\n    const reader = new FileReader();\n    reader.onloadend = function (e) {\n      resolve(e.target.result);\n    }\n    reader.readAsDataURL(image);\n  });\n    \n\nexport const adjustExcelTime = string => {\n    return string.toString();\n};\n\nexport const cleanExcelData = (d: DataFrame) => \n    d.map(rows => rows.map(col => adjustExcelTime(col)));\n\n\nexport const convertJsonToArrayWithIds = (obj: object) =>\n    Object.entries(obj).map(([_id, val]) => ({ _id, ...val }));\n\nexport const excludeFilterDataFrameRows = (filterType: string, filterVal: string, data: DataFrame) => {\n    const header = [...data[0]];\n    const searchableColIndex = getColumnIdxOfKey(data, filterType);\n    if (searchableColIndex === -1) { // This table doesn't have a column for specified filterType\n        return [...data];\n    }\n    const filteredRows = data.slice(1).filter(row => {\n        let cellText = row[searchableColIndex];\n        // if (filterType === 'time') cellText = cellText.replace(':', '');\n        return cellText && !cellText.toLowerCase().includes(filterVal.toLowerCase());\n    });\n    return [header].concat(filteredRows);\n}\n\nexport const filterDataFrameRows = (filterType: string, filterVal: string, data: DataFrame) => {\n    const header = [...data[0]];\n    const searchableColIndex = getColumnIdxOfKey(data, filterType);\n    if (searchableColIndex === -1) { // This table doesn't have a column for specified filterType\n        return [header];\n    }\n    const filteredRows = data.slice(1).filter(row => {\n        let cellText = row[searchableColIndex];\n        // if (filterType === 'time') cellText = cellText.replace(':', '');\n        return cellText && cellText.toLowerCase().includes(filterVal.toLowerCase());\n    });\n    return [header].concat(filteredRows);\n}\n\nexport const getColumnIdxOfKey = (data: DataFrame, key: string) => {\n  const colIndex = data[0].findIndex(currKey =>\n    currKey.toLowerCase().includes(key.toLowerCase())\n  );\n  return colIndex;\n}\n\n// Time is intended to be formatted as '7:00 AM'\nexport const adjustToLocalTimezone = time => {\n  return moment(time, 'h:mm A').tz('America/New_York').format('h:mm A');\n}","import React from 'react';\nimport { useLocation } from 'react-router-dom';\nimport * as linkify from 'linkifyjs';\n\nimport { excludeFilterDataFrameRows, filterDataFrameRows } from '../../util';\n\ninterface ScheduleCardProps {\n  schedule: Schedule;\n  filter?: {\n    /** The column in the header to look for */\n    type: string;\n    /** The string to compare cells with */\n    match: string;\n  };\n  stringToHighlight?: string;\n}\n\ninterface SmartTextProps {\n  input: string;\n  highlight?: boolean;\n  row?: string[];\n  passwordCol: number;\n}\n/** If input contains a link, SmartText will replace it with a clickable ancor tag */\nexport const SmartText: React.FC<SmartTextProps> = ({\n  input,\n  highlight,\n  row,\n  passwordCol,\n}) => {\n  const urls = linkify.find(input);\n  const location = useLocation();\n  let password = '';\n  if (~passwordCol && row[passwordCol] !== '-') {\n    password = `Password: ${row[passwordCol]}`;\n  }\n  if (urls.length === 0) {\n    return <p className={highlight && 'highlight'}>{input}</p>;\n  }\n\n  const { value, type } = urls[0];\n  const iconSize = location.pathname === '/' ? 80 : 40;\n  return (\n    <span>\n      <a\n        href={value}\n        style={{ height: iconSize, width: iconSize }}\n        className={\n          value.includes('zoom') && type === 'url'\n            ? 'zoomIcon'\n            : value.includes('gotomeeting') && type === 'url'\n            ? 'gtmIcon'\n            : ''\n        }\n      >\n        {type === 'url' ? 'Click here' : value}\n      </a>{' '}\n      <p className=\"password\">{password}</p>\n    </span>\n  );\n};\n\nconst ScheduleCard: React.FC<ScheduleCardProps> = ({ schedule, filter }) => {\n  const location = useLocation();\n  const { rows, logo } = schedule;\n\n  const path = location.pathname.split('/');\n  const title = {\n    minyanim: 'Minyanim',\n    classes: 'All Schedules',\n    today: \"Today's classes\",\n  }[path[path.length - 1]];\n\n  const filteredRows = filter\n    ? filterDataFrameRows(filter.type, filter.match, rows)\n    : excludeFilterDataFrameRows('type', 'minyan', rows);\n\n  if (filteredRows.length === 1) {\n    // No rows matched the filter criteria\n    return null;\n  }\n\n  const headerRow = filteredRows[0];\n\n  const filteredCols = headerRow.reduce((acc, cur, idx) => {\n    if (cur.toString().toLowerCase().startsWith('hide')) {\n      acc.push(idx);\n    }\n    return acc;\n  }, []);\n\n  const filterColIdx =\n    filter && rows[0].findIndex(col => col.toLowerCase().includes(filter.type));\n\n  const passwordColIdx = rows[0].findIndex(col =>\n    col.toLowerCase().includes('password')\n  );\n\n  const shouldHighlight = (colText: string, colIdx) => {\n    if (filter?.type === 'topic' && location.pathname === '/bekhorot') {\n      return false;\n    }\n    const text = colText.toLowerCase();\n    return filterColIdx === colIdx && text.includes(filter.match);\n  };\n\n  return (\n    <div className=\"schedule-card my-2\">\n      <div className=\"card-header\">\n        {!!logo && (\n          <div className=\"w-100\">\n            <img src={logo} className=\"logo ml-4\" />\n          </div>\n        )}\n        <h1 className=\"schedule-title\">{title}</h1>\n      </div>\n      <table className=\"table table-striped table-bordered table-hover shadow\">\n        <thead className=\"text-light\">\n          <tr>\n            {filteredRows[0].map((col, idx) => {\n              if (!filteredCols.includes(idx)) {\n                return <th key={idx}>{col}</th>;\n              }\n            })}\n          </tr>\n        </thead>\n        <tbody>\n          {filteredRows.slice(1).map((row, rIdx) => (\n            <tr key={rIdx}>\n              {row.map((col, cIdx) => {\n                if (!filteredCols.includes(cIdx)) {\n                  return (\n                    <td key={cIdx}>\n                      <SmartText\n                        input={col}\n                        row={row}\n                        passwordCol={passwordColIdx}\n                        highlight={shouldHighlight(col, cIdx)}\n                      />\n                    </td>\n                  );\n                }\n              })}\n            </tr>\n          ))}\n        </tbody>\n      </table>\n    </div>\n  );\n};\n\nexport default ScheduleCard;\n","import moment from 'moment-timezone';\n\nclass ScheduleService {\n  private storage: Database;\n\n  static scheduleRef = '1TS3fZHRPlhI4L_URhKJXGa48eOy6BiqM1GeSUJL9jFs/live-website-feed';\n\n  constructor(database: Database) {\n    this.storage = database;\n  }\n\n  async getAllSchedules(): Promise<DataFrame> {\n    return this.storage.read(ScheduleService.scheduleRef).then((data) => this.convertTimesToLocalTimezone(data));\n  }\n\n  onSchedulesChanged(cb: (data: DataFrame) => void) {\n    this.storage.onChange(ScheduleService.scheduleRef, (data: DataFrame) => {\n      cb(this.convertTimesToLocalTimezone(data));\n    });\n  }\n\n  private convertTimesToLocalTimezone = (data: DataFrame) => {\n    const adjustTime = (time) => moment(time, 'h:mm A').local().format('h:mm A');\n    const idxOfTime = data[0].findIndex((col) => col.toLowerCase().includes('time'));\n    const formatted = data.map((row, i) => {\n      const newRow = [...row];\n      if (i > 0) { // skip header\n        const timeRange = newRow[idxOfTime].split('-').map((time) => time.trim());\n        newRow[idxOfTime] = timeRange.map(adjustTime).join(' - \\n');\n      }\n      return newRow;\n    });\n    return formatted;\n  }\n}\n\nfunction createScheduleManager(persistedStorage: Database) {\n  return new ScheduleService(persistedStorage);\n}\n\nexport default createScheduleManager;\n","import { convertJsonToArrayWithIds } from '../util';\n\nclass AttachmentService {\n  private storage: Database;\n\n  constructor(database: Database) {\n    this.storage = database;\n  }\n\n  async addAttachment(attachment: Attachment) {\n    return this.storage.push('attachments', attachment);\n  }\n\n  async removeAttachment(_id: firebase.database.Reference) {\n    return this.storage.delete('attachments', _id);\n  }\n\n  async updateAttachment(_id: firebase.database.Reference, newAttachment: Attachment) {\n    return this.storage.write(`attachments/${_id}`, newAttachment);\n  }\n\n  async getAllAttachments(): Promise<Attachment[]> {\n    return this._alphabetize(await this.storage.findAll('attachments'));\n  }\n\n  onAttachmentsChanged(cb: (attachments: Attachment[]) => void) {\n    this.storage.onChange('attachments', data =>\n      cb(this._alphabetize(convertJsonToArrayWithIds(data)))\n    );\n  }\n\n  _alphabetize(attachments: Attachment[]) {\n    return attachments ? attachments.sort((a, b) => a.title > b.title ? 1 : a.title < b.title ? -1 : 0) : [];\n  }\n}\n\nfunction createAttachmentManager(persistedStorage: Database) {\n  return new AttachmentService(persistedStorage);\n}\n\nexport default createAttachmentManager;\n","import firebase from 'firebase/app';\nimport 'firebase/database';\nimport 'firebase/storage';\n\nimport { convertJsonToArrayWithIds } from '../util';\n\nclass FirebaseManager implements Database {\n  db: firebase.database.Database;\n\n  storage: firebase.storage.Storage;\n\n  constructor(config: FirebaseConfig) {\n    const app = firebase.initializeApp(config);\n    this.db = app.database();\n    this.storage = app.storage();\n  }\n\n  async read(path: string) {\n    return this.db\n      .ref(path)\n      .once('value')\n      .then((s) => s.val());\n  }\n\n\n  async write(path: string, data: any) {\n    return this.db.ref(path).set(data);\n  }\n\n  async push(basePath: string, data: any) {\n    return this.db.ref(basePath).push(data);\n  }\n\n  /** Gets all documents with their id's in collection */\n  async findAll(path: string) {\n    return this.db.ref(path).once('value')\n      .then((s) => s.val() || {}).then(convertJsonToArrayWithIds);\n  }\n\n  async delete(path: string, _id: firebase.database.Reference) {\n    return this.db.ref(`${path}/${_id}`).remove();\n  }\n\n  onChange(path: string, cb: (data: any) => void) {\n    this.db.ref(path).on('value', (s) => cb(s.val()));\n  }\n}\n\nfunction createFirebaseDbManager(config: FirebaseConfig) {\n  return new FirebaseManager(config);\n}\n\nexport default createFirebaseDbManager;\n","import { convertJsonToArrayWithIds } from '../util';\n\nclass FormService {\n  private storage: Database;\n\n  constructor(database: Database) {\n    this.storage = database;\n  }\n\n  async addForm(form: Form) {\n    return this.storage.push('tehillim', form);\n  }\n\n  async removeForm(_id: firebase.database.Reference) {\n    return this.storage.delete('tehillim', _id);\n  }\n\n  async updateForm(_id: firebase.database.Reference, newForm: Form) {\n    return this.storage.write(`tehillim/${_id}`, newForm);\n  }\n\n  async getAllForms(): Promise<Form[]> {\n    return this._alphabetize(await this.storage.findAll('tehillim'));\n  }\n\n  onFormsChanged(cb: (tehillim: Form[]) => void) {\n    this.storage.onChange('tehillim', data =>\n      cb(this._alphabetize(convertJsonToArrayWithIds(data)))\n    );\n  }\n\n  _alphabetize(tehillim: Form[]) {\n    return tehillim ? tehillim.sort((a, b) => a.firstName > b.firstName ? 1 : a.firstName < b.firstName ? -1 : 0) : [];\n  }\n}\n\nfunction createFormManager(persistedStorage: Database) {\n  return new FormService(persistedStorage);\n}\n\nexport default createFormManager;\n","import createScheduleManager from './ScheduleService';\nimport createAttachmentManager from './AttachmentService';\nimport createFirebaseDbManager from './DatabaseService';\nimport createFormManager from './FormService';\n\nconst firebaseConfig: FirebaseConfig = {\n  apiKey: \"AIzaSyDUNiNW3dfplmHAq65wfKIGGSHS8MGXgzM\",\n  authDomain: \"sca-rab-schedules.firebaseapp.com\",\n  databaseURL: \"https://sca-rab-schedules.firebaseio.com\",\n  projectId: \"sca-rab-schedules\",\n  storageBucket: \"sca-rab-schedules.appspot.com\",\n  messagingSenderId: \"893196040077\",\n  appId: \"1:893196040077:web:75ee18b5d771028f616fc4\"\n}\n\nconst database = createFirebaseDbManager(firebaseConfig);\nconst scheduleManager = createScheduleManager(database);\nconst attachmentManager = createAttachmentManager(database);\nconst formManager = createFormManager(database);\n\nexport { database, scheduleManager, attachmentManager, formManager };\n","import React from 'react';\nimport moment from 'moment';\n// import * as linkify from 'linkifyjs';\n\nimport { SmartText } from './ScheduleCard';\nimport { excludeFilterDataFrameRows, filterDataFrameRows } from '../../util';\n\ninterface LiveItemsProps {\n  schedules: Schedule[];\n  filter?: {\n    type: string;\n    match: string;\n  };\n  heading: string;\n}\n\nconst LiveItems: React.FC<LiveItemsProps> = ({\n  schedules,\n  filter,\n  heading,\n}) => {\n  let rows = [];\n  schedules.forEach(schedule => {\n    const filteredRows =\n      filter?.match === 'minyan'\n        ? filterDataFrameRows(filter.type, filter.match, schedule.rows)\n        : excludeFilterDataFrameRows('type', 'minyan', schedule.rows);\n    rows.push(...filteredRows);\n  });\n  const headerRows = rows[0];\n\n  if (rows.length < 2) {\n    // No rows matched the filter criteria\n    return null;\n  }\n\n  // Only show the rows whose data in column 'HIDE-Toggle' contains 'show'\n  rows = filterDataFrameRows('toggle', 'show', rows);\n\n  const dayIdx = headerRows.findIndex(data =>\n    data.toLowerCase().includes('days')\n  );\n  const timeIdx = headerRows.findIndex(data =>\n    data.toLowerCase().includes('time')\n  );\n  const passwordIdx = headerRows.findIndex(data =>\n    data.toLowerCase().includes('password')\n  );\n\n  const filteredCols = headerRows.reduce((acc, cur, idx) => {\n    if (\n      cur.toString().toLowerCase().startsWith('hide') ||\n      cur.toString().toLowerCase().startsWith('days')\n    ) {\n      acc.push(idx);\n    }\n    return acc;\n  }, []);\n\n  const days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\n\n  const now = new Date();\n\n  const filteredByDay = rows.filter(row => {\n    let flag = false;\n    const rowDays = row[dayIdx];\n    if (rowDays.includes('Daily')) {\n      flag = true;\n    } else if (rowDays.includes(days[now.getDay()])) {\n      flag = true;\n    } else if (rowDays.includes('-')) {\n      const rowDaysArr = rowDays.split(/[^\\w-]/);\n      rowDaysArr.forEach(rowDay => {\n        if (rowDay.includes('-')) {\n          const leftRight = rowDay.split('-');\n          const left = days.findIndex(v => leftRight[0].includes(v));\n          const right = days.findIndex(v => leftRight[1].includes(v));\n          if (left < now.getDay() && right > now.getDay()) {\n            flag = true;\n          }\n        }\n      });\n    }\n    return flag;\n  });\n\n  const live = [];\n  const elapsed = [];\n  const upcoming = [];\n\n  filteredByDay.forEach(row => {\n    const rowTimes = row[timeIdx].match(/\\d\\d?:\\d\\d ?(?:[AP]M)?/g);\n    if (!rowTimes) return false;\n    if (\n      !rowTimes[0].toLowerCase().includes('pm') &&\n      row[3].toLowerCase().includes('pm')\n    ) {\n      rowTimes[0] += ' pm';\n    }\n    const startTime = moment(rowTimes[0], 'h:mm:ss a');\n    const endTime =\n      rowTimes.length > 1\n        ? moment(rowTimes[1], 'h:mm:ss a')\n        : moment(startTime).add(1, 'h');\n    startTime.subtract(10, 'm');\n\n    if (moment(now).isBetween(startTime, endTime, null, '[)')) {\n      live.push(row);\n    } else if (moment(now).isSameOrAfter(endTime)) {\n      elapsed.push(row);\n    } else if (moment(now).isBefore(startTime)) {\n      upcoming.push(row);\n    }\n  });\n\n  return (\n    <div className=\"schedule-card my-2\">\n      {(() =>\n        live.length > 0 && (\n          <>\n            <div className=\"card-header\">\n              <h1 className=\"schedule-title\">Ongoing {heading}</h1>\n            </div>\n            <table className=\"table table-striped table-bordered table-hover shadow\">\n              <thead className=\"text-light\">\n                <tr>\n                  {headerRows.map((col, idx) => {\n                    if (!filteredCols.includes(idx)) {\n                      return <th key={idx}>{col}</th>;\n                    }\n                  })}\n                </tr>\n              </thead>\n              <tbody>\n                {live.map((row, rowId) => (\n                  <tr key={rowId}>\n                    {row.map((cell, cellId) => {\n                      if (!filteredCols.includes(cellId)) {\n                        return (\n                          <td key={cellId}>\n                            <SmartText\n                              input={cell}\n                              passwordCol={passwordIdx}\n                              row={row}\n                            />\n                          </td>\n                        );\n                      }\n                    })}\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </>\n        ))()}\n      {(() =>\n        upcoming.length > 0 && (\n          <>\n            <div className=\"card-header\">\n              <h1 className=\"schedule-title\">Upcoming {heading}</h1>\n            </div>\n            <table className=\"table table-striped table-bordered table-hover shadow\">\n              <thead className=\"text-light\">\n                <tr>\n                  {headerRows.map((col, idx) => {\n                    if (!filteredCols.includes(idx)) {\n                      return <th key={idx}>{col}</th>;\n                    }\n                  })}\n                </tr>\n              </thead>\n              <tbody>\n                {upcoming.map((row, rowId) => (\n                  <tr key={rowId}>\n                    {row.map((cell, cellId) => {\n                      if (!filteredCols.includes(cellId)) {\n                        return (\n                          <td key={cellId}>\n                            <SmartText\n                              input={cell}\n                              passwordCol={passwordIdx}\n                              row={row}\n                            />\n                          </td>\n                        );\n                      }\n                    })}\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </>\n        ))()}\n\n      {(() =>\n        elapsed.length > 0 && (\n          <>\n            <div className=\"card-header\">\n              <h1 className=\"schedule-title\">Completed {heading}</h1>\n            </div>\n            <table className=\"table table-striped table-bordered table-hover shadow\">\n              <thead className=\"text-light\">\n                <tr>\n                  {headerRows.map((col, idx) => {\n                    if (!filteredCols.includes(idx)) {\n                      return <th key={idx}>{col}</th>;\n                    }\n                  })}\n                </tr>\n              </thead>\n              <tbody>\n                {elapsed.map((row, rowId) => (\n                  <tr key={rowId}>\n                    {row.map((cell, cellId) => {\n                      if (!filteredCols.includes(cellId)) {\n                        return (\n                          <td key={cellId}>\n                            <SmartText\n                              input={cell}\n                              passwordCol={passwordIdx}\n                              row={row}\n                            />\n                          </td>\n                        );\n                      }\n                    })}\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </>\n        ))()}\n    </div>\n  );\n};\n\nexport default LiveItems;\n","import React, { useState, useCallback, useEffect } from 'react';\nimport { useLocation } from 'react-router-dom';\n\nimport { getColumnIdxOfKey } from '../../util';\nimport { ScheduleCard, LiveItems } from '../components';\n\ninterface ClassesScreenProps {\n  schedules: Schedule[];\n}\n\nconst ClassesScreen: React.FC<ClassesScreenProps> = ({ schedules }) => {\n  const [filterType, setfilterType] = useState<string>('none');\n  const [filterVal, setFilterVal] = useState<string>('');\n  const [heading, setHeading] = useState<string>('Classes');\n  const location = useLocation();\n\n  const days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\n\n  useEffect(() => {\n    if (location.pathname.includes('/minyanim')) {\n      setHeading('Minyanim');\n      setfilterType('type');\n      setFilterVal('minyan');\n    } else if (location.pathname.includes('/today')) {\n      const now = new Date();\n      const today = days[now.getDay()];\n      setfilterType('day');\n      setFilterVal(today);\n    }\n  }, [days, location.pathname]);\n\n  const calcAvailableTimes = useCallback(() => {\n    const validTime = /\\d\\d?:\\d\\d ([AP]M)/;\n    let times = [];\n    schedules.forEach(({ rows }) => {\n      const idxOfTime = getColumnIdxOfKey(rows, 'time');\n      const moreTimes = rows\n        .map(row => row[idxOfTime])\n        .filter(time => validTime.test(time))\n        .map(time => time.match(validTime)[0]);\n      times = times.concat(moreTimes);\n    });\n    return Array.from(new Set(times)).sort((a, b) => {\n      const _a = new Date(`1970/01/01 ${a}`);\n      const _b = new Date(`1970/01/01 ${b}`);\n      return _a > _b ? 1 : _a < _b ? -1 : 0;\n    });\n  }, [schedules]);\n\n  const calcTeachers = useCallback(() => {\n    let teachers = [];\n    schedules.forEach(({ rows }) => {\n      const idxOfTime = getColumnIdxOfKey(rows, 'teacher');\n      const moreTimes = rows.map(row => row[idxOfTime]);\n      teachers = teachers.concat(moreTimes);\n    });\n    return Array.from(new Set(teachers)).sort();\n  }, [schedules]);\n\n  return (\n    <>\n      <div className=\"container\">\n        <div className=\"row\">\n          <ul className=\"nav nav-pills nav-justified m-3 w-100\">\n            <li className=\"nav-item\">\n              <a\n                href=\"/#/today\"\n                className={\n                  location.pathname.includes('/today')\n                    ? 'nav-link active'\n                    : 'nav-link'\n                }\n              >\n                Today&apos;s Classes\n              </a>\n            </li>\n            <li className=\"nav-item\">\n              <a\n                href=\"/#/minyanim\"\n                className={\n                  location.pathname.includes('/minyanim')\n                    ? 'nav-link active'\n                    : 'nav-link'\n                }\n              >\n                Minyanim\n              </a>\n            </li>\n            <li className=\"nav-item\">\n              <a\n                href=\"/#/classes\"\n                className={\n                  location.pathname.includes('/classes')\n                    ? 'nav-link active'\n                    : 'nav-link'\n                }\n              >\n                Full Schedule\n              </a>\n            </li>\n            <li className=\"nav-item\">\n              <a\n                href=\"https://www.youtube.com/channel/UCsHn2xQEscv11QaNHpPf37A\"\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                className=\"nav-link\"\n              >\n                Recordings\n              </a>\n            </li>\n          </ul>\n        </div>\n      </div>\n\n      {location.pathname === '/today' && (\n        <div className=\"container\">\n          <LiveItems\n            schedules={schedules}\n            filter={\n              !(filterType === 'none' || filterVal === '') && {\n                type: filterType,\n                match: filterVal,\n              }\n            }\n            heading={heading}\n          />\n        </div>\n      )}\n\n      <div className=\"container\">\n        <div className={location.pathname !== '/classes' ? 'd-none' : 'row'}>\n          <div className=\"input-group mt-3 mx-3\">\n            <label htmlFor=\"filter\" className=\"header-title\">\n              Filter By:{' '}\n              <select\n                name=\"filter\"\n                onChange={e => {\n                  setfilterType(e.target.value);\n                  setFilterVal('');\n                }}\n                id=\"\"\n                value={filterType}\n              >\n                <option value=\"none\">No filter</option>\n                <option value=\"time\">Time of day</option>\n                <option value=\"day\">Day of week</option>\n                <option value=\"topic\">Topic</option>\n                <option value=\"teacher\">Teacher</option>\n              </select>\n              {filterType !== 'none' &&\n                (filterType === 'day' ? (\n                  <select\n                    className=\"ml-2\"\n                    onChange={e => setFilterVal(e.target.value)}\n                  >\n                    <option value=\"\">Choose Day</option>\n                    <option value=\"mon\">Mon</option>\n                    <option value=\"tues\">Tues</option>\n                    <option value=\"wed\">Wed</option>\n                    <option value=\"thurs\">Thurs</option>\n                    <option value=\"fri\">Fri</option>\n                    <option value=\"sun\">Sun</option>\n                  </select>\n                ) : filterType === 'time' ? (\n                  <select\n                    className=\"ml-2\"\n                    onChange={e => setFilterVal(e.target.value.toLowerCase())}\n                  >\n                    <option value=\"\">Choose Time</option>\n                    {calcAvailableTimes().map(time => (\n                      <option value={time}>{time}</option>\n                    ))}\n                  </select>\n                ) : filterType === 'teacher' ? (\n                  <select\n                    className=\"ml-2\"\n                    onChange={e => setFilterVal(e.target.value.toLowerCase())}\n                  >\n                    <option value=\"\">Choose Teacher</option>\n                    {calcTeachers().map(time => (\n                      <option value={time}>{time}</option>\n                    ))}\n                  </select>\n                ) : (\n                  <input\n                    type=\"text\"\n                    className=\"ml-2\"\n                    onChange={e => setFilterVal(e.target.value.toLowerCase())}\n                    placeholder={`Enter ${filterType}(s)`}\n                  />\n                ))}\n            </label>\n          </div>\n        </div>\n        {location.pathname !== '/today' &&\n          schedules.map((schedule, idx) => (\n            <ScheduleCard\n              key={idx}\n              schedule={schedule}\n              filter={\n                !(filterType === 'none' || filterVal === '') && {\n                  type: filterType,\n                  match: filterVal,\n                }\n              }\n            />\n          ))}\n      </div>\n    </>\n  );\n};\n\nexport default ClassesScreen;\n","import React, { useEffect, useState } from 'react';\n\nimport { ClassesScreen } from '../ui';\nimport { scheduleManager } from '../service';\n\nconst ClassesScreenCreator = () => {\n  const [schedules, setSchedules] = useState<Schedule[]>([]);\n\n  useEffect(() => {\n    scheduleManager.onSchedulesChanged((data: DataFrame) => {\n      setSchedules([{ title: 'All Schedules', rows: data }]);\n    });\n  }, []);\n\n  return <ClassesScreen schedules={schedules} />;\n};\n\nexport default ClassesScreenCreator;\n","import React, { useEffect } from 'react';\nimport { HashRouter, Route, Redirect, useHistory } from 'react-router-dom';\nimport ReactGa from 'react-ga';\n\nimport { Header, Footer } from './ui/components';\nimport {\n  ClassesScreenCreator,\n  AttachmentsAdminScreenCreator,\n  AttachmentsScreenCreator,\n  FormScreenCreator,\n  IndexScreenCreator,\n} from './factory';\n\ninterface RouteMap {\n  [path: string]: RouteConfig;\n}\ninterface RouteConfig {\n  exact?: boolean;\n  pageName?: string; // For display purposes\n  Component: React.ComponentType;\n}\n\nconst renderRoutes = (routes: RouteMap) =>\n  Object.entries(routes).map(([path, { exact, Component }]) => (\n    <Route path={path} exact={exact} component={Component} />\n  ));\n\nexport const adminRoutes: RouteMap = {\n  '/edit-letters': { exact: true, Component: AttachmentsAdminScreenCreator },\n};\n\nconst AdminNavigator = () => (\n  <HashRouter basename=\"/admin\">{renderRoutes(adminRoutes)}</HashRouter>\n);\n\nconst CompThatTracksLocation = () => {\n  const history = useHistory();\n  useEffect(\n    () =>\n      history.listen(location => {\n        ReactGa.pageview(location.pathname);\n      }),\n    [history]\n  );\n\n  return null;\n};\n\nexport const mainRoutes: RouteMap = {\n  '/': { exact: true, Component: IndexScreenCreator, pageName: '' },\n  '/today': {\n    exact: true,\n    Component: ClassesScreenCreator,\n    // pageName: 'SCA Affiliate Synagogue - Virtual Classes Schedules',\n  },\n  '/classes': {\n    exact: true,\n    Component: ClassesScreenCreator,\n    // pageName: 'SCA Affiliate Synagogue - Virtual Classes Schedules',\n  },\n  '/minyanim': {\n    exact: true,\n    Component: ClassesScreenCreator,\n    // pageName: 'SCA Affiliate Synagogue - Virtual Minyanim Schedules',\n  },\n  '/bekhorot': {\n    exact: true,\n    Component: ClassesScreenCreator,\n    pageName: 'SCA Affiliate Synagogue - Siyum Bekhorot Schedules',\n  },\n  '/letters': {\n    exact: true,\n    Component: AttachmentsScreenCreator,\n    pageName: 'COVID-19 Letters',\n  },\n  '/tehillim': {\n    exact: true,\n    Component: FormScreenCreator,\n    pageName: 'SCA Tehilim Requests',\n  },\n  '/admin': { Component: AdminNavigator },\n  // '/wix/today': { Component: ClassesScreenCreator },\n};\n\nconst NavigatorForWix = () => (\n  <HashRouter>\n    <CompThatTracksLocation />\n    <Redirect from=\"/\" to=\"/today\" />\n    <Route path=\"/today\" component={ClassesScreenCreator} />\n    <Route path=\"/minyanim\" component={ClassesScreenCreator} />\n    <Route path=\"/classes\" component={ClassesScreenCreator} />\n  </HashRouter>\n);\n\nconst MainNavigator = () => (\n  <HashRouter>\n    <CompThatTracksLocation />\n    <Header />\n    {renderRoutes(mainRoutes)}\n    <Footer />\n  </HashRouter>\n);\n\nexport default NavigatorForWix;\n","import React from 'react';\nimport AppNavigator from './AppNavigator';\n\nconst App = () => <AppNavigator />;\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport ReactGa from 'react-ga';\n\nimport 'bootstrap/dist/css/bootstrap.css';\nimport 'jquery';\nimport 'bootstrap/dist/js/bootstrap.bundle';\nimport './ui/styles.css';\n\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactGa.initialize('UA-164561407-1');\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}