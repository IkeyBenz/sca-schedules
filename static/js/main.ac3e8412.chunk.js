(this["webpackJsonpsca-rabbi-schedules"]=this["webpackJsonpsca-rabbi-schedules"]||[]).push([[0],{38:function(e,t){},42:function(e,t,a){e.exports=a.p+"static/media/SCALogo.b2d06419.png"},47:function(e,t,a){e.exports=a(81)},53:function(e,t,a){},64:function(e,t){},65:function(e,t){},81:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(40),l=a.n(c),u=(a(52),a(53),a(21)),s=a(25),i=a(26),o=a(6),d=a(16),m=a.n(d),f=a(31),h=a.n(f),p=function(e){return e.map((function(e){return e.map((function(e){return function(e){if("string"===typeof e)return e;var t=new Date(86400*(e-25568)*1e3+18e6);return m()(t).format("LT")}(e)}))}))},v=function(e){return Object.entries(e).map((function(e){var t=Object(o.a)(e,2),a=t[0],n=t[1];return Object(i.a)({_id:a},n)}))},b=function(e,t){var a=e[0].findIndex((function(e){return e.toLowerCase().includes(t.toLowerCase())}));return-1!==a?a:void 0},g=function(e){var t=e.input,a=e.highlight,n=u.find(t);if(0===n.length)return r.a.createElement("p",{className:a&&"highlight"},t);var c=n[0],l=c.value,s=c.type;return r.a.createElement("a",{href:l},"url"===s?"Click here":l)},E=function(e){var t=e.schedule,a=e.filter,n=t.title,c=t.rows,l=t.logo,u=a?function(e,t,a){var n=Object(s.a)(a[0]),r=b(a,e);if(-1===r)return[n];var c=a.slice(1).filter((function(a){var n=a[r];return"time"===e&&(n=n.replace(":","")),n.toLowerCase().includes(t.toLowerCase())}));return[n].concat(c)}(a.type,a.match,c):c;if(1===u.length)return null;var i=a&&c[0].findIndex((function(e){return e.toLowerCase().includes(a.type)})),o=function(e,t){var n=e.toLowerCase();return i===t&&("time"===a.type?n.replace(":","").includes(a.match):n.includes(a.match))};return r.a.createElement("div",{className:"schedule-card my-5"},r.a.createElement("div",{className:"card-header"},!!l&&r.a.createElement("div",{className:"w-100"},r.a.createElement("img",{src:l,className:"logo ml-4"})),r.a.createElement("h1",{className:"schedule-title"},n)),r.a.createElement("table",{className:"table table-striped table-bordered table-hover shadow"},r.a.createElement("thead",{className:"text-light"},r.a.createElement("tr",null,u[0].map((function(e,t){return r.a.createElement("th",{key:t},e)})))),r.a.createElement("tbody",null,u.slice(1).map((function(e,t){return r.a.createElement("tr",{key:t},e.map((function(e,t){return r.a.createElement("td",{key:t},r.a.createElement(g,{input:e,highlight:o(e,t)}))})))})))))},w=a(24),y=function(e){var t=e.onSpreadSheetDropped,a=e.currentSpreadSheet,c=Object(n.useState)(void 0),l=Object(o.a)(c,2),u=l[0],s=l[1],i=Object(n.useState)(void 0),d=Object(o.a)(i,2),m=d[0],f=d[1];Object(n.useEffect)((function(){return f(a)}),[a]);var v=Object(w.a)({onDrop:function(e){var a,n=e[0];if(!/^([a-zA-Z0-9\s_\\.\-:])+(.xls|.xlsx)$/.test(n.name.toLowerCase()))return alert("Only files with .xlsx or .xls extentions are allowed here.");s(n.name),(a=n,new Promise((function(e){var t=new FileReader;t.onload=function(t){var a=t.target.result,n=h.a.read(a,{type:"array"}),r=n.Sheets[n.SheetNames[0]],c=h.a.utils.sheet_to_json(r),l=Object.keys(c[0]),u=[l].concat(c.map((function(e){return l.map((function(t){return e[t]}))})));e(p(u))},t.readAsArrayBuffer(a)}))).then((function(e){f(e),t(e)}))}}),b=v.getRootProps,g=v.getInputProps;v.isDragActive;return r.a.createElement("div",Object.assign({},b(),{className:"file-dropper scroll-content p-4 my-2"}),r.a.createElement("input",g()),!u&&r.a.createElement("p",null,"Drop excel file here",r.a.createElement("br",null),"(or click to choose file)"),!!u&&r.a.createElement("p",null,u),!!m&&r.a.createElement(E,{schedule:{title:"",rows:m}}))},j=function(e){var t=e.onImageDropped,a=e.currentImage,c=Object(n.useState)(a),l=Object(o.a)(c,2),u=l[0],s=l[1];Object(n.useEffect)((function(){return s(a)}),[a]);var i=Object(w.a)({onDrop:function(e){var a,n=e[0];if(!/^([a-zA-Z0-9\s_\\.\-:])+(.jpg|.jpeg|.png)$/.test(n.name.toLowerCase()))return alert("Only files with .jpg or .jpeg or .png extensions are allowed here.");(a=n,new Promise((function(e){var t=new FileReader;t.onloadend=function(t){e(t.target.result)},t.readAsDataURL(a)}))).then((function(e){s(e),t(e)}))}}),d=i.getRootProps,m=i.getInputProps;i.isDragActive;return r.a.createElement("div",Object.assign({},d(),{className:"image-dropper mt-2"}),r.a.createElement("input",m()),r.a.createElement("p",null,"Drop logo here",r.a.createElement("br",null),"(or click to choose file)"),!!u&&r.a.createElement("img",{src:u,className:"logo"}))},O=function(e){var t=e.input,a=u.find(t);if(0===a.length)return r.a.createElement("p",null,t);var n=a[0],c=n.value,l=n.type;return r.a.createElement("a",{href:c},"url"===l?"Click here":c)},S=function(e){var t=e.schedules,a=[];t.map((function(e){a.push.apply(a,Object(s.a)(e.rows))}));var n=a[0],c=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],l=new Date,u=a.filter((function(e){var t=!1,a=e[2];if(a.includes("Daily"))t=!0;else if(a.includes(c[l.getDay()]))t=!0;else if(a.includes("-")){a.split(/[^\w\-]/).forEach((function(e){if(e.includes("-")){var a=e.split("-"),n=c.indexOf(a[0]),r=c.indexOf(a[1]);n<l.getDay()&&r>l.getDay()&&(t=!0)}}))}return t})).filter((function(e){var t=e[3].match(/\d\d?:\d\d ?(?:[AP]M)?/g);!t[0].toLowerCase().includes("pm")&&e[3].toLowerCase().includes("pm")&&(t[0]+=" pm");var a=m()(t[0],"h:mm:ss a"),n=t.length>1?m()(t[1],"h:mm:ss a"):m()(a).add(1,"h");return a.subtract(5,"m"),m()(l).isBetween(a,n,null,"[)")}));return u.length?r.a.createElement("div",{className:"schedule-card my-5"},r.a.createElement("div",{className:"card-header row"},r.a.createElement("h1",{className:"schedule-title"},"Live Classes")),r.a.createElement("table",{className:"table table-striped table-bordered table-hover shadow"},r.a.createElement("thead",{className:"text-light"},r.a.createElement("tr",null,n.map((function(e,t){return r.a.createElement("th",{key:t},e)})))),r.a.createElement("tbody",null,u.map((function(e,t){return r.a.createElement("tr",{key:t},e.map((function(e,t){return r.a.createElement("td",{key:t},r.a.createElement(O,{input:e}))})))}))))):null},k=a(42),N=a.n(k),x=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("header",{className:"navbar fixed-top bg-light shadow"},r.a.createElement("div",{className:"w-100 d-flex justify-content-between"},r.a.createElement("img",{className:"navbar-brand py-0",src:N.a,alt:"SCA",height:"60"}),r.a.createElement("a",{href:"mailto:info@scaupdates.org",className:"btn btn-primary pt-3"},"Contact Us")),r.a.createElement("h5",{className:"w-100 text-center header-title m-0"},"Zoom Class Schedules:")),r.a.createElement("div",{className:"header-spacing"}))},C=a(44),D=a(13),A=function(e){var t=e.schedules,a=Object(n.useState)("none"),c=Object(o.a)(a,2),l=c[0],u=c[1],s=Object(n.useState)(""),i=Object(o.a)(s,2),d=i[0],m=i[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"container"},r.a.createElement(S,{schedules:t})),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"input-group mt-3"},r.a.createElement("label",{htmlFor:"filter",className:"header-title"},"Filter By:"," ",r.a.createElement("select",{name:"filter",onChange:function(e){return u(e.target.value)},id:"",value:l},r.a.createElement("option",{value:"none"},"No filter"),r.a.createElement("option",{value:"time"},"Time of day"),r.a.createElement("option",{value:"day"},"Day of week"),r.a.createElement("option",{value:"class"},"Class"),r.a.createElement("option",{value:"teacher"},"Teacher")),"none"!==l&&r.a.createElement("input",{type:"text",className:"ml-2",onChange:function(e){return m(e.target.value.toLowerCase())},placeholder:"Enter ".concat(l,"(s)")}))),t.map((function(e,t){return r.a.createElement(E,{key:t,schedule:e,filter:!("none"===l||""===d)&&{type:l,match:d}})}))))},L=function(e){var t=e.schedule,a=e.isEditing,n=e.onUpdateBtnPressed,c=e.onDeleteBtnPressed;return r.a.createElement("li",{className:"list-group-item d-flex justify-content-between my-2"},r.a.createElement("h3",null,t.title),a?r.a.createElement("button",{className:"btn btn-danger m-1",onClick:c},"x"):r.a.createElement("button",{className:"btn btn-warning",onClick:n},r.a.createElement("i",{className:"fas fa-edit text-light"})))},I=function(e){var t=e.schedules,a=e.createSchedule,c=e.deleteSchedule,l=e.updateSchedule,u=Object(n.useState)(void 0),s=Object(o.a)(u,2),d=s[0],m=s[1],f=function(e){return m(Object(i.a)({},d,{},e))};return Object(n.useEffect)((function(){console.log(d)}),[d]),r.a.createElement("div",{className:"admin-page-container"},r.a.createElement("div",{className:"schedule-manager-widget row mt-5 py-5"},r.a.createElement("div",{className:"col scroll-content"},t.map((function(e,t){return r.a.createElement(L,{key:t,schedule:e,isEditing:(null===d||void 0===d?void 0:d._id)===e._id,onUpdateBtnPressed:function(){return m(e)},onDeleteBtnPressed:function(){return c(e._id)}})}))),r.a.createElement("div",{className:"col schedule-upload-container"},r.a.createElement("div",{className:"text-center"},r.a.createElement("h3",{className:"text-light"},d?"Update Schedule:":"Upload Schedule Here:")),r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Schedule Title",value:(null===d||void 0===d?void 0:d.title)||"",onChange:function(e){return f({title:e.target.value})}}),r.a.createElement(j,{onImageDropped:function(e){return f({logo:e})},currentImage:null===d||void 0===d?void 0:d.logo}),r.a.createElement(y,{onSpreadSheetDropped:function(e){return f({rows:e})},currentSpreadSheet:null===d||void 0===d?void 0:d.rows}),r.a.createElement("button",{className:"btn btn-success",onClick:function(){var e={title:d.title,rows:d.rows,logo:d.logo};d._id?l(d._id,e):a(e),m(void 0)}},(null===d||void 0===d?void 0:d._id)?"Save updates":"Upload Schedule"))))},_=a(4),P=a.n(_),B=a(11),U=a(22),z=a(23),F=function(){function e(t){Object(U.a)(this,e),this.storage=void 0,this.storage=t}return Object(z.a)(e,[{key:"addSchedule",value:function(){var e=Object(B.a)(P.a.mark((function e(t){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.storage.push("schedules",t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"removeSchedule",value:function(){var e=Object(B.a)(P.a.mark((function e(t){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.storage.delete("schedules",t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateSchedule",value:function(){var e=Object(B.a)(P.a.mark((function e(t,a){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.storage.write("schedules/".concat(t),a));case 1:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"getAllSchedules",value:function(){var e=Object(B.a)(P.a.mark((function e(){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,this.storage.findAll("schedules");case 3:return e.t1=e.sent,e.abrupt("return",e.t0._alphabetize.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onSchedulesChanged",value:function(e){var t=this;this.storage.onChange("schedules",(function(a){return e(t._alphabetize(a))}))}},{key:"_alphabetize",value:function(e){return e?e.sort((function(e,t){return e.title>t.title?1:e.title<t.title?-1:0})):[]}}]),e}();var R=function(e){return new F(e)},T=a(43),M=a.n(T),W=function(){function e(t){Object(U.a)(this,e),this.db=void 0;var a=M.a.initializeApp(t);this.db=a.database()}return Object(z.a)(e,[{key:"read",value:function(){var e=Object(B.a)(P.a.mark((function e(t){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.db.ref(t).once("value").then((function(e){return e.val()})));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"write",value:function(){var e=Object(B.a)(P.a.mark((function e(t,a){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.db.ref(t).set(a));case 1:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"push",value:function(){var e=Object(B.a)(P.a.mark((function e(t,a){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.db.ref(t).push(a));case 1:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"findAll",value:function(){var e=Object(B.a)(P.a.mark((function e(t){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.db.ref(t).once("value").then((function(e){return e.val()||{}})).then(v));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(B.a)(P.a.mark((function e(t,a){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.db.ref("".concat(t,"/").concat(a)).remove());case 1:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"onChange",value:function(e,t){this.db.ref(e).on("value",(function(e){return t(v(e.val()))}))}}]),e}();var G=R(function(e){return new W(e)}({apiKey:"AIzaSyDUNiNW3dfplmHAq65wfKIGGSHS8MGXgzM",authDomain:"sca-rab-schedules.firebaseapp.com",databaseURL:"https://sca-rab-schedules.firebaseio.com",projectId:"sca-rab-schedules",storageBucket:"sca-rab-schedules.appspot.com",messagingSenderId:"893196040077",appId:"1:893196040077:web:75ee18b5d771028f616fc4"})),H=function(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)((function(){G.onSchedulesChanged(c)}),[]),r.a.createElement(A,{schedules:a})},Z=function(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),a=t[0],c=t[1];Object(n.useEffect)((function(){G.onSchedulesChanged(c)}),[]);return r.a.createElement(I,{schedules:a,createSchedule:function(e){return e.rows?e.title?G.addSchedule(e):alert("Please enter the title of this table"):alert("Please upload a spreadsheet first")},updateSchedule:function(e,t){return G.updateSchedule(e,t)},deleteSchedule:function(e){return G.removeSchedule(e)}})},$=function(){return r.a.createElement(C.a,null,r.a.createElement(D.a,{exact:!0,path:"/",component:H}),r.a.createElement(D.a,{exact:!0,path:"/admin",component:Z}))},J=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(x,null),r.a.createElement($,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(J,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[47,1,2]]]);
//# sourceMappingURL=main.ac3e8412.chunk.js.map