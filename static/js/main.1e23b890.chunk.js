(this["webpackJsonpsca-rabbi-schedules"]=this["webpackJsonpsca-rabbi-schedules"]||[]).push([[0],{26:function(e,t,a){e.exports=a.p+"static/media/spinner.3acec546.gif"},27:function(e,t,a){e.exports=a.p+"static/media/SCALogo.80df96a3.png"},42:function(e,t){},51:function(e,t,a){e.exports=a.p+"static/media/on-air-indicator.fb6b3f3c.png"},52:function(e,t,a){e.exports=a.p+"static/media/sca-white.cbe6bec1.svg"},54:function(e,t,a){e.exports=a(89)},63:function(e,t,a){},76:function(e,t){},77:function(e,t){},89:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(45),i=a.n(c),s=a(21),u=(a(61),a(37),a(62),a(63),a(2)),o=a(14),l=a(15),m=a(46),h=a(11),f=a(19),d=a(24),p=a.n(d),v=(a(33),function(e){return Object.entries(e).map((function(e){var t=Object(u.a)(e,2),a=t[0],n=t[1];return Object(f.a)({_id:a},n)}))}),b=function(e,t,a){var n=Object(h.a)(a[0]),r=E(a,e);if(-1===r)return Object(h.a)(a);var c=a.slice(1).filter((function(e){var a=e[r];return a&&!a.toLowerCase().includes(t.toLowerCase())}));return[n].concat(c)},w=function(e,t,a){var n=Object(h.a)(a[0]),r=E(a,e);if(-1===r)return[n];var c=a.slice(1).filter((function(e){var a=e[r];return a&&a.toLowerCase().includes(t.toLowerCase())}));return[n].concat(c)},E=function(e,t){return e[0].findIndex((function(e){return e.toLowerCase().includes(t.toLowerCase())}))},y=function(e){var t=e.input,a=e.highlight,n=e.row,c=e.passwordCol,i=m.find(t),s=Object(o.g)(),u="";if(~c&&"-"!==n[c]&&(u="Password: ".concat(n[c])),0===i.length)return r.a.createElement("p",{className:a&&"highlight"},t);var l=i[0],h=l.value,f=l.type,d="/"===s.pathname?80:40;return r.a.createElement("span",null,r.a.createElement("a",{href:h,style:{height:d,width:d},className:h.includes("zoom")&&"url"===f?"zoomIcon":h.includes("gotomeeting")&&"url"===f?"gtmIcon":""},"url"===f?"Click here":h)," ",r.a.createElement("p",{className:"password"},u))},g=function(e){var t=e.schedule,a=e.filter,n=Object(o.g)(),c=t.rows,i=t.logo,s=n.pathname.split("/"),u={minyanim:"Minyanim",classes:"All Schedules",today:"Today's classes"}[s[s.length-1]],l=a?w(a.type,a.match,c):b("type","minyan",c);if(1===l.length)return null;var m=l[0].reduce((function(e,t,a){return t.toString().toLowerCase().startsWith("hide")&&e.push(a),e}),[]),h=a&&c[0].findIndex((function(e){return e.toLowerCase().includes(a.type)})),f=c[0].findIndex((function(e){return e.toLowerCase().includes("password")})),d=function(e,t){if("topic"===(null===a||void 0===a?void 0:a.type)&&"/bekhorot"===n.pathname)return!1;var r=e.toLowerCase();return h===t&&r.includes(a.match)};return r.a.createElement("div",{className:"schedule-card my-2"},r.a.createElement("div",{className:"card-header"},!!i&&r.a.createElement("div",{className:"w-100"},r.a.createElement("img",{src:i,className:"logo ml-4"})),r.a.createElement("h1",{className:"schedule-title"},u)),r.a.createElement("table",{className:"table table-striped table-bordered table-hover shadow"},r.a.createElement("thead",{className:"text-light"},r.a.createElement("tr",null,l[0].map((function(e,t){if(!m.includes(t))return r.a.createElement("th",{key:t},e)})))),r.a.createElement("tbody",null,l.slice(1).map((function(e,t){return r.a.createElement("tr",{key:t},e.map((function(t,a){if(!m.includes(a))return r.a.createElement("td",{key:a},r.a.createElement(y,{input:t,row:e,passwordCol:f,highlight:d(t,a)}))})))})))))},k=(a(28),a(25),a(3)),j=a.n(k),N=a(5),C=a(7),O=a(10),x=function(){function e(t){Object(C.a)(this,e),this.storage=void 0,this.convertTimesToLocalTimezone=function(e){var t=function(e){return p()(e,"h:mm A").local().format("h:mm A")},a=e[0].findIndex((function(e){return e.toLowerCase().includes("time")}));return e.map((function(e,n){var r=Object(h.a)(e);if(n>0){var c=r[a].split("-").map((function(e){return e.trim()}));r[a]=c.map(t).join(" - \n")}return r}))},this.storage=t}return Object(O.a)(e,[{key:"getAllSchedules",value:function(){var t=Object(N.a)(j.a.mark((function t(){var a=this;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.storage.read(e.scheduleRef).then((function(e){return a.convertTimesToLocalTimezone(e)})));case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"onSchedulesChanged",value:function(t){var a=this;this.storage.onChange(e.scheduleRef,(function(e){t(a.convertTimesToLocalTimezone(e))}))}}]),e}();x.scheduleRef="1TS3fZHRPlhI4L_URhKJXGa48eOy6BiqM1GeSUJL9jFs/live-website-feed";var L=function(e){return new x(e)},S=function(){function e(t){Object(C.a)(this,e),this.storage=void 0,this.storage=t}return Object(O.a)(e,[{key:"addAttachment",value:function(){var e=Object(N.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.storage.push("attachments",t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"removeAttachment",value:function(){var e=Object(N.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.storage.delete("attachments",t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateAttachment",value:function(){var e=Object(N.a)(j.a.mark((function e(t,a){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.storage.write("attachments/".concat(t),a));case 1:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"getAllAttachments",value:function(){var e=Object(N.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,this.storage.findAll("attachments");case 3:return e.t1=e.sent,e.abrupt("return",e.t0._alphabetize.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onAttachmentsChanged",value:function(e){var t=this;this.storage.onChange("attachments",(function(a){return e(t._alphabetize(v(a)))}))}},{key:"_alphabetize",value:function(e){return e?e.sort((function(e,t){return e.title>t.title?1:e.title<t.title?-1:0})):[]}}]),e}();var A=function(e){return new S(e)},T=a(50),I=a.n(T),F=(a(86),a(90),function(){function e(t){Object(C.a)(this,e),this.db=void 0,this.storage=void 0;var a=I.a.initializeApp(t);this.db=a.database(),this.storage=a.storage()}return Object(O.a)(e,[{key:"read",value:function(){var e=Object(N.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.db.ref(t).once("value").then((function(e){return e.val()})));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"write",value:function(){var e=Object(N.a)(j.a.mark((function e(t,a){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.db.ref(t).set(a));case 1:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"push",value:function(){var e=Object(N.a)(j.a.mark((function e(t,a){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.db.ref(t).push(a));case 1:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"findAll",value:function(){var e=Object(N.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.db.ref(t).once("value").then((function(e){return e.val()||{}})).then(v));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(N.a)(j.a.mark((function e(t,a){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.db.ref("".concat(t,"/").concat(a)).remove());case 1:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"onChange",value:function(e,t){this.db.ref(e).on("value",(function(e){return t(e.val())}))}}]),e}());var z=function(e){return new F(e)},D=function(){function e(t){Object(C.a)(this,e),this.storage=void 0,this.storage=t}return Object(O.a)(e,[{key:"addForm",value:function(){var e=Object(N.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.storage.push("tehillim",t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"removeForm",value:function(){var e=Object(N.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.storage.delete("tehillim",t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateForm",value:function(){var e=Object(N.a)(j.a.mark((function e(t,a){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.storage.write("tehillim/".concat(t),a));case 1:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"getAllForms",value:function(){var e=Object(N.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,this.storage.findAll("tehillim");case 3:return e.t1=e.sent,e.abrupt("return",e.t0._alphabetize.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onFormsChanged",value:function(e){var t=this;this.storage.onChange("tehillim",(function(a){return e(t._alphabetize(v(a)))}))}},{key:"_alphabetize",value:function(e){return e?e.sort((function(e,t){return e.firstName>t.firstName?1:e.firstName<t.firstName?-1:0})):[]}}]),e}();var M=function(e){return new D(e)},W=z({apiKey:"AIzaSyDUNiNW3dfplmHAq65wfKIGGSHS8MGXgzM",authDomain:"sca-rab-schedules.firebaseapp.com",databaseURL:"https://sca-rab-schedules.firebaseio.com",projectId:"sca-rab-schedules",storageBucket:"sca-rab-schedules.appspot.com",messagingSenderId:"893196040077",appId:"1:893196040077:web:75ee18b5d771028f616fc4"}),_=L(W),B=(A(W),M(W),a(26),a(6)),R=a.n(B),U=function(e){var t=e.schedules,a=e.filter,n=e.heading,c=[];t.forEach((function(e){var t,n="minyan"===(null===a||void 0===a?void 0:a.match)?w(a.type,a.match,e.rows):b("type","minyan",e.rows);(t=c).push.apply(t,Object(h.a)(n))}));var i=c[0];if(c.length<2)return null;c=w("toggle","show",c);var s=i.findIndex((function(e){return e.toLowerCase().includes("days")})),u=i.findIndex((function(e){return e.toLowerCase().includes("time")})),o=i.findIndex((function(e){return e.toLowerCase().includes("password")})),l=i.reduce((function(e,t,a){return(t.toString().toLowerCase().startsWith("hide")||t.toString().toLowerCase().startsWith("days"))&&e.push(a),e}),[]),m=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],f=new Date,d=c.filter((function(e){var t=!1,a=e[s];if(a.includes("Daily"))t=!0;else if(a.includes(m[f.getDay()]))t=!0;else if(a.includes("-")){a.split(/[^\w-]/).forEach((function(e){if(e.includes("-")){var a=e.split("-"),n=m.findIndex((function(e){return a[0].includes(e)})),r=m.findIndex((function(e){return a[1].includes(e)}));n<f.getDay()&&r>f.getDay()&&(t=!0)}}))}return t})),p=[],v=[],E=[];return d.forEach((function(e){var t=e[u].match(/\d\d?:\d\d ?(?:[AP]M)?/g);if(!t)return!1;!t[0].toLowerCase().includes("pm")&&e[3].toLowerCase().includes("pm")&&(t[0]+=" pm");var a=R()(t[0],"h:mm:ss a"),n=t.length>1?R()(t[1],"h:mm:ss a"):R()(a).add(1,"h");a.subtract(10,"m"),R()(f).isBetween(a,n,null,"[)")?p.push(e):R()(f).isSameOrAfter(n)?v.push(e):R()(f).isBefore(a)&&E.push(e)})),r.a.createElement("div",{className:"schedule-card my-2"},p.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"card-header"},r.a.createElement("h1",{className:"schedule-title"},"Ongoing ",n)),r.a.createElement("table",{className:"table table-striped table-bordered table-hover shadow"},r.a.createElement("thead",{className:"text-light"},r.a.createElement("tr",null,i.map((function(e,t){if(!l.includes(t))return r.a.createElement("th",{key:t},e)})))),r.a.createElement("tbody",null,p.map((function(e,t){return r.a.createElement("tr",{key:t},e.map((function(t,a){if(!l.includes(a))return r.a.createElement("td",{key:a},r.a.createElement(y,{input:t,passwordCol:o,row:e}))})))}))))),E.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"card-header"},r.a.createElement("h1",{className:"schedule-title"},"Upcoming ",n)),r.a.createElement("table",{className:"table table-striped table-bordered table-hover shadow"},r.a.createElement("thead",{className:"text-light"},r.a.createElement("tr",null,i.map((function(e,t){if(!l.includes(t))return r.a.createElement("th",{key:t},e)})))),r.a.createElement("tbody",null,E.map((function(e,t){return r.a.createElement("tr",{key:t},e.map((function(t,a){if(!l.includes(a))return r.a.createElement("td",{key:a},r.a.createElement(y,{input:t,passwordCol:o,row:e}))})))}))))),v.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"card-header"},r.a.createElement("h1",{className:"schedule-title"},"Completed ",n)),r.a.createElement("table",{className:"table table-striped table-bordered table-hover shadow"},r.a.createElement("thead",{className:"text-light"},r.a.createElement("tr",null,i.map((function(e,t){if(!l.includes(t))return r.a.createElement("th",{key:t},e)})))),r.a.createElement("tbody",null,v.map((function(e,t){return r.a.createElement("tr",{key:t},e.map((function(t,a){if(!l.includes(a))return r.a.createElement("td",{key:a},r.a.createElement(y,{input:t,passwordCol:o,row:e}))})))}))))))},G=(a(53),a(88),a(51),a(27),a(52),function(e){var t=e.schedules,a=Object(n.useState)("none"),c=Object(u.a)(a,2),i=c[0],s=c[1],l=Object(n.useState)(""),m=Object(u.a)(l,2),h=m[0],f=m[1],d=Object(n.useState)("Classes"),p=Object(u.a)(d,2),v=p[0],b=p[1],w=Object(o.g)(),y=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];Object(n.useEffect)((function(){if(w.pathname.includes("/minyanim"))b("Minyanim"),s("type"),f("minyan");else if(w.pathname.includes("/today")){var e=new Date,t=y[e.getDay()];s("day"),f(t)}}),[y,w.pathname]);var k=Object(n.useCallback)((function(){var e=/\d\d?:\d\d ([AP]M)/,a=[];return t.forEach((function(t){var n=t.rows,r=E(n,"time"),c=n.map((function(e){return e[r]})).filter((function(t){return e.test(t)})).map((function(t){return t.match(e)[0]}));a=a.concat(c)})),Array.from(new Set(a)).sort((function(e,t){var a=new Date("1970/01/01 ".concat(e)),n=new Date("1970/01/01 ".concat(t));return a>n?1:a<n?-1:0}))}),[t]),j=Object(n.useCallback)((function(){var e=[];return t.forEach((function(t){var a=t.rows,n=E(a,"teacher"),r=a.map((function(e){return e[n]}));e=e.concat(r)})),Array.from(new Set(e)).sort()}),[t]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("ul",{className:"nav nav-pills nav-justified m-3 w-100"},r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{href:"/#/today",className:w.pathname.includes("/today")?"nav-link active":"nav-link"},"Today's Classes")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{href:"/#/minyanim",className:w.pathname.includes("/minyanim")?"nav-link active":"nav-link"},"Minyanim")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{href:"/#/classes",className:w.pathname.includes("/classes")?"nav-link active":"nav-link"},"Full Schedule")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{href:"https://www.youtube.com/channel/UCsHn2xQEscv11QaNHpPf37A",target:"_blank",rel:"noopener noreferrer",className:"nav-link"},"Recordings"))))),"/today"===w.pathname&&r.a.createElement("div",{className:"container"},r.a.createElement(U,{schedules:t,filter:!("none"===i||""===h)&&{type:i,match:h},heading:v})),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"/classes"!==w.pathname?"d-none":"row"},r.a.createElement("div",{className:"input-group mt-3 mx-3"},r.a.createElement("label",{htmlFor:"filter",className:"header-title"},"Filter By:"," ",r.a.createElement("select",{name:"filter",onChange:function(e){s(e.target.value),f("")},id:"",value:i},r.a.createElement("option",{value:"none"},"No filter"),r.a.createElement("option",{value:"time"},"Time of day"),r.a.createElement("option",{value:"day"},"Day of week"),r.a.createElement("option",{value:"topic"},"Topic"),r.a.createElement("option",{value:"teacher"},"Teacher")),"none"!==i&&("day"===i?r.a.createElement("select",{className:"ml-2",onChange:function(e){return f(e.target.value)}},r.a.createElement("option",{value:""},"Choose Day"),r.a.createElement("option",{value:"mon"},"Mon"),r.a.createElement("option",{value:"tues"},"Tues"),r.a.createElement("option",{value:"wed"},"Wed"),r.a.createElement("option",{value:"thurs"},"Thurs"),r.a.createElement("option",{value:"fri"},"Fri"),r.a.createElement("option",{value:"sun"},"Sun")):"time"===i?r.a.createElement("select",{className:"ml-2",onChange:function(e){return f(e.target.value.toLowerCase())}},r.a.createElement("option",{value:""},"Choose Time"),k().map((function(e){return r.a.createElement("option",{value:e},e)}))):"teacher"===i?r.a.createElement("select",{className:"ml-2",onChange:function(e){return f(e.target.value.toLowerCase())}},r.a.createElement("option",{value:""},"Choose Teacher"),j().map((function(e){return r.a.createElement("option",{value:e},e)}))):r.a.createElement("input",{type:"text",className:"ml-2",onChange:function(e){return f(e.target.value.toLowerCase())},placeholder:"Enter ".concat(i,"(s)")}))))),"/today"!==w.pathname&&t.map((function(e,t){return r.a.createElement(g,{key:t,schedule:e,filter:!("none"===i||""===h)&&{type:i,match:h}})}))))}),H=function(){var e=Object(n.useState)([]),t=Object(u.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)((function(){_.onSchedulesChanged((function(e){c([{title:"All Schedules",rows:e}])}))}),[]),r.a.createElement(G,{schedules:a})},P=function(){var e=Object(o.f)();return Object(n.useEffect)((function(){return e.listen((function(e){s.a.pageview(e.pathname)}))}),[e]),null},J=function(){return r.a.createElement(l.a,{basename:"sca-schedules"},r.a.createElement(P,null),r.a.createElement(o.a,{from:"/",to:"/today"}),r.a.createElement(o.b,{path:"/today",component:H}),r.a.createElement(o.b,{path:"/minyanim",component:H}),r.a.createElement(o.b,{path:"/classes",component:H}))},K=function(){return r.a.createElement(J,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.initialize("UA-164561407-1"),i.a.render(r.a.createElement(K,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[54,1,2]]]);
//# sourceMappingURL=main.1e23b890.chunk.js.map