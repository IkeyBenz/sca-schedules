{"version":3,"sources":["ui/assets/spinner.gif","ui/assets/SCALogo.png","util.ts","ui/components/ScheduleCard.tsx","ui/components/AttachmentCard.tsx","ui/components/SpreadSheetDropBox.tsx","service/ScheduleService.ts","service/AttachmentService.ts","service/DatabaseService.ts","service/FormService.ts","service/index.ts","ui/components/ImageDropBox.tsx","ui/components/LiveItems.tsx","ui/components/Header.tsx","ui/screens/Classes.tsx","ui/screens/Admin.tsx","ui/screens/Attachments.tsx","ui/screens/AttachmentsAdmin.tsx","ui/screens/Form.tsx","ui/screens/Index.tsx","factory/ClassesScreenCreator.tsx","AppNavigator.tsx","factory/AdminScreenCreator.tsx","factory/AttachmentsAdminScreenCreator.tsx","factory/IndexScreenCreator.tsx","factory/AttachmentsScreenCreator.tsx","factory/FormScreenCreator.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["module","exports","cleanExcelData","d","map","rows","col","string","data","Date","moment","format","adjustExcelTime","convertJsonToArrayWithIds","obj","Object","entries","_id","val","filterDataFrameRows","filterType","filterVal","header","searchableColIndex","getColumnIdxOfKey","filteredRows","slice","filter","row","cellText","replace","toLowerCase","includes","concat","key","colIndex","findIndex","currKey","undefined","SmartText","input","highlight","urls","linkify","length","className","value","type","href","ScheduleCard","schedule","title","logo","match","excludeFilterDataFrameRows","filterColIdx","shouldHighlight","colText","colIdx","text","src","idx","rIdx","cIdx","AttachmentCard","attachment","file","cover","body","target","SpreadSheetDropBox","onSpreadSheetDropped","currentSpreadSheet","useState","droppedFileName","setDroppedFileName","dataRows","setDataRows","useEffect","useDropzone","onDrop","files","excelFile","test","name","alert","Promise","resolve","reader","FileReader","onload","e","result","workbook","xlsx","read","spreadSheet","Sheets","SheetNames","rowObjs","utils","sheet_to_json","keys","readAsArrayBuffer","then","getRootProps","getInputProps","isDragActive","ScheduleService","database","storage","this","push","delete","newSchedule","write","findAll","_alphabetize","cb","onChange","schedules","sort","a","b","createScheduleManager","persistedStorage","AttachmentService","newAttachment","attachments","createAttachmentManager","FirebaseManager","config","db","app","firebase","initializeApp","path","ref","once","s","set","basePath","remove","on","createFirebaseDbManager","FormService","form","newForm","tehillim","firstName","createFormManager","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","scheduleManager","attachmentManager","formManager","ImageDropBox","onImageDropped","currentImage","previewImage","setPreviewImage","accept","randomizeFilename","storageRef","metadata","cacheControl","onUploadStart","spinner","onUploadSuccess","child","getDownloadURL","url","id","htmlFor","LiveItems","heading","forEach","headerRows","days","now","filteredByTime","flag","rowDays","getDay","split","rowDay","leftRight","left","v","right","rowTimes","startTime","endTime","add","subtract","isBetween","rowId","cell","cellId","Header","props","location","useLocation","pageName","mainRoutes","pathname","SCALogo","alt","height","ClassesScreen","setfilterType","setFilterVal","setHeading","placeholder","SchedulePreviewItem","isEditing","onUpdateBtnPressed","onDeleteBtnPressed","onClick","AdminScreen","createSchedule","deleteSchedule","updateSchedule","scheduleBeingEdited","setScheduleBeingEdited","updateScheduleBeingEdited","updates","console","log","AttachmentScreen","AttachmentPreviewItem","createAttachment","deleteAttachment","updateAttachment","attachmentBeingEdited","setAttachmentBeingEdited","updateAttachmentBeingEdited","uploading","FormScreen","forms","setFirstName","benbat","setBenbat","mothersName","setMothersName","formMessage","setFormMessage","success","setTimeout","fail","onSubmit","preventDefault","required","checked","person","IndexScreen","ClassesScreenCreator","setSchedules","onSchedulesChanged","Classes","renderRoutes","routes","exact","Component","component","adminRoutes","currentSchedules","setCurrentSchedules","Admin","addSchedule","updatedSchedule","removeSchedule","currentAttachments","setCurrentAttachments","onAttachmentsChanged","AttachmentsAdmin","addAttachment","updatedAttachment","removeAttachment","Index","setAttachments","Attachments","setForms","onFormsChanged","Form","basename","MainNavigator","App","AppNavigator","Boolean","window","hostname","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.61971dc6.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/spinner.3acec546.gif\";","module.exports = __webpack_public_path__ + \"static/media/SCALogo.80df96a3.png\";","import moment from 'moment';\nimport xlsx from 'xlsx';\n\nimport { DataFrame } from './types';\n\nexport const dataframeFromExcelFile = (excelFile: File) =>\n  new Promise<DataFrame>(resolve => {\n    var reader = new FileReader();\n\n    reader.onload = function(e) {\n      const data = e.target.result;\n      const workbook = xlsx.read(data, { type: 'array' });\n      const spreadSheet = workbook.Sheets[workbook.SheetNames[0]];\n\n      const rowObjs = xlsx.utils.sheet_to_json(spreadSheet);\n      const header = Object.keys(rowObjs[0]);\n      const rows: DataFrame = [header].concat(\n        rowObjs.map(obj => header.map(key => obj[key])),\n      );\n      resolve(cleanExcelData(rows));\n    };\n\n    reader.readAsArrayBuffer(excelFile);\n  });\n\nexport const convertImageFileToBase64Str = (image: File) => \n  new Promise<string | ArrayBuffer>(resolve => {\n    const reader = new FileReader();\n    reader.onloadend = function (e) {\n      resolve(e.target.result);\n    }\n    reader.readAsDataURL(image);\n  });\n    \n\nexport const adjustExcelTime = string => {\n    if (typeof string === 'string') return string;\n    const timeInMiliSeconds = (string - (25567 + 1)) * 86400 * 1000;\n    const fiveHours = 1000 * 60 * 60 * 5;\n    const data = new Date(timeInMiliSeconds + fiveHours);\n    return moment(data).format('LT');\n};\n\nexport const cleanExcelData = (d: DataFrame) => \n    d.map(rows => rows.map(col => adjustExcelTime(col)));\n\n\nexport const convertJsonToArrayWithIds = (obj: object) =>\n    Object.entries(obj).map(([_id, val]) => ({ _id, ...val }));\n\nexport const excludeFilterDataFrameRows = (filterType: string, filterVal: string, data: DataFrame) => {\n    const header = [...data[0]];\n    const searchableColIndex = getColumnIdxOfKey(data, filterType);\n    if (searchableColIndex === -1) { // This table doesn't have a column for specified filterType\n        return [header];\n    }\n    const filteredRows = data.slice(1).filter(row => {\n        let cellText = row[searchableColIndex];\n        if (filterType === 'time') cellText = cellText.replace(':', '');\n        return cellText && !cellText.toLowerCase().includes(filterVal.toLowerCase());\n    });\n    return [header].concat(filteredRows);\n}\n\nexport const filterDataFrameRows = (filterType: string, filterVal: string, data: DataFrame) => {\n    const header = [...data[0]];\n    const searchableColIndex = getColumnIdxOfKey(data, filterType);\n    if (searchableColIndex === -1) { // This table doesn't have a column for specified filterType\n        return [header];\n    }\n    const filteredRows = data.slice(1).filter(row => {\n        let cellText = row[searchableColIndex];\n        if (filterType === 'time') cellText = cellText.replace(':', '');\n        return cellText && cellText.toLowerCase().includes(filterVal.toLowerCase());\n    });\n    return [header].concat(filteredRows);\n}\n\nexport const getColumnIdxOfKey = (data: DataFrame, key: string) => {\n  const colIndex = data[0].findIndex(currKey =>\n    currKey.toLowerCase().includes(key.toLowerCase())\n  );\n  return colIndex !== -1 ? colIndex : undefined;\n}","import React from 'react';\n\nimport * as linkify from 'linkifyjs';\nimport { Schedule } from '../../types';\nimport { excludeFilterDataFrameRows, filterDataFrameRows } from '../../util';\n\ninterface ScheduleCardProps {\n  schedule: Schedule;\n  filter?: {\n    /** The column in the header to look for */\n    type: string;\n    /** The string to compare cells with */\n    match: string;\n  };\n  stringToHighlight?: string;\n}\n\ninterface SmartTextProps {\n  input: string;\n  highlight?: boolean;\n}\n/** If input contains a link, SmartText will replace it with a clickable ancor tag */\nconst SmartText: React.FC<SmartTextProps> = ({ input, highlight }) => {\n  const urls = linkify.find(input);\n  if (urls.length === 0) {\n    return <p className={highlight && 'highlight'}>{input}</p>;\n  }\n  const { value, type } = urls[0];\n  return <a href={value}>{type === 'url' ? 'Click here' : value}</a>;\n};\n\nconst ScheduleCard: React.FC<ScheduleCardProps> = ({ schedule, filter }) => {\n  const { title, rows, logo } = schedule;\n\n  const filteredRows = filter\n    ? filterDataFrameRows(filter.type, filter.match, rows)\n    : excludeFilterDataFrameRows('topic', 'minyan', rows);\n\n  if (filteredRows.length === 1) {\n    // No rows matched the filter criteria\n    return null;\n  }\n\n  const filterColIdx =\n    filter && rows[0].findIndex(col => col.toLowerCase().includes(filter.type));\n\n  const shouldHighlight = (colText: string, colIdx) => {\n    if (filter?.match === 'minyan') {\n      return false;\n    }\n    const text = colText.toLowerCase();\n    return filterColIdx === colIdx\n      ? filter.type === 'time'\n        ? text.replace(':', '').includes(filter.match)\n        : text.includes(filter.match)\n      : false;\n  };\n\n  return (\n    <div className=\"schedule-card my-5\">\n      <div className=\"card-header\">\n        {!!logo && (\n          <div className=\"w-100\">\n            <img src={logo} className=\"logo ml-4\" />\n          </div>\n        )}\n        <h1 className=\"schedule-title\">{title}</h1>\n      </div>\n      <table className=\"table table-striped table-bordered table-hover shadow\">\n        <thead className=\"text-light\">\n          <tr>\n            {filteredRows[0].map((col, idx) => (\n              <th key={idx}>{col}</th>\n            ))}\n          </tr>\n        </thead>\n        <tbody>\n          {filteredRows.slice(1).map((row, rIdx) => (\n            <tr key={rIdx}>\n              {row.map((col, cIdx) => (\n                <td key={cIdx}>\n                  <SmartText\n                    input={col}\n                    highlight={shouldHighlight(col, cIdx)}\n                  />\n                </td>\n              ))}\n            </tr>\n          ))}\n        </tbody>\n      </table>\n    </div>\n  );\n};\n\nexport default ScheduleCard;\n","import React from 'react';\n\nimport { Attachment } from '../../types';\n\ninterface AttachmentCardProps {\n  attachment: Attachment;\n}\n\nconst AttachmentCard: React.FC<AttachmentCardProps> = ({ attachment }) => {\n  const { title, file, cover, body } = attachment;\n\n  return (\n    <div className=\"attachment-card px-0 col-md-4\">\n      <a href={file} target=\"_blank\" className=\"d-flex flex-column align-items-center justify-content-center\">\n        <div className=\"card-header\">\n          {!!cover && (\n            <div className=\"w-100\">\n              <img src={cover} className=\"attachment-cover\" />\n            </div>\n          )}\n          <h3 className=\"attachment-title\">{title}</h3>\n          {!!body && (\n            <p className=\"attachment-caption\">{body}</p>\n          )}\n        </div>\n        <span className=\"btn btn-secondary\">Click to download</span>\n      </a>\n    </div>\n  );\n};\n\nexport default AttachmentCard;\n","import React, { useCallback, useState, useEffect } from 'react';\nimport { useDropzone } from 'react-dropzone';\n\nimport { DataFrame } from '../../types';\nimport { dataframeFromExcelFile } from '../../util';\n\nimport ScheduleCard from './ScheduleCard';\n\ninterface SpreadSheetDropBoxProps {\n  onSpreadSheetDropped: (data: DataFrame) => void;\n  currentSpreadSheet?: DataFrame;\n}\n\nconst SpreadSheetDropBox: React.FC<SpreadSheetDropBoxProps> = ({\n  onSpreadSheetDropped,\n  currentSpreadSheet,\n}) => {\n  const [droppedFileName, setDroppedFileName] = useState(undefined);\n  const [dataRows, setDataRows] = useState<DataFrame>(undefined);\n\n  useEffect(() => setDataRows(currentSpreadSheet), [currentSpreadSheet]);\n\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({\n    onDrop: (files: File[]) => {\n      const file = files[0];\n      const excelExt = /^([a-zA-Z0-9\\s_\\\\.\\-:])+(.xls|.xlsx)$/;\n      if (!excelExt.test(file.name.toLowerCase())) {\n        return alert(\n          'Only files with .xlsx or .xls extentions are allowed here.',\n        );\n      }\n      setDroppedFileName(file.name);\n      dataframeFromExcelFile(file).then(rows => {\n        setDataRows(rows);\n        onSpreadSheetDropped(rows);\n      });\n    },\n  });\n\n  return (\n    <div {...getRootProps()} className=\"file-dropper scroll-content p-4 my-2\">\n      <input {...getInputProps()} />\n      {!droppedFileName && (\n        <p>\n          Drop excel file here\n          <br />\n          (or click to choose file)\n        </p>\n      )}\n      {!!droppedFileName && <p>{droppedFileName}</p>}\n      {!!dataRows && <ScheduleCard schedule={{ title: '', rows: dataRows }} />}\n    </div>\n  );\n};\n\nexport default SpreadSheetDropBox;\n","import { Schedule, Database } from '../types';\n\nclass ScheduleService {\n  private storage: Database;\n\n  constructor(database: Database) {\n    this.storage = database;\n  }\n\n  async addSchedule(schedule: Schedule) {\n    return this.storage.push('schedules', schedule);\n  }\n\n  async removeSchedule(_id: firebase.database.Reference) {\n    return this.storage.delete('schedules', _id);\n  }\n\n  async updateSchedule(_id: firebase.database.Reference, newSchedule: Schedule) {\n    return this.storage.write(`schedules/${_id}`, newSchedule);\n  }\n\n  async getAllSchedules(): Promise<Schedule[]> {\n    return this._alphabetize(await this.storage.findAll('schedules'));\n  }\n\n  onSchedulesChanged(cb: (schedules: Schedule[]) => void) {\n    this.storage.onChange('schedules', data => cb(this._alphabetize(data)));\n  }\n\n  _alphabetize(schedules: Schedule[]) {\n    return schedules ? schedules.sort((a, b) => a.title > b.title ? 1 : a.title < b.title ? -1 : 0) : [];\n  }\n}\n\nfunction createScheduleManager(persistedStorage: Database) {\n  return new ScheduleService(persistedStorage);\n}\n\nexport default createScheduleManager;\n","import { Attachment, Database } from '../types';\n\nclass AttachmentService {\n  private storage: Database;\n\n  constructor(database: Database) {\n    this.storage = database;\n  }\n\n  async addAttachment(attachment: Attachment) {\n    return this.storage.push('attachments', attachment);\n  }\n\n  async removeAttachment(_id: firebase.database.Reference) {\n    return this.storage.delete('attachments', _id);\n  }\n\n  async updateAttachment(_id: firebase.database.Reference, newAttachment: Attachment) {\n    return this.storage.write(`attachments/${_id}`, newAttachment);\n  }\n\n  async getAllAttachments(): Promise<Attachment[]> {\n    return this._alphabetize(await this.storage.findAll('attachments'));\n  }\n\n  onAttachmentsChanged(cb: (attachments: Attachment[]) => void) {\n    this.storage.onChange('attachments', data => cb(this._alphabetize(data)));\n  }\n\n  _alphabetize(attachments: Attachment[]) {\n    return attachments ? attachments.sort((a, b) => a.title > b.title ? 1 : a.title < b.title ? -1 : 0) : [];\n  }\n}\n\nfunction createAttachmentManager(persistedStorage: Database) {\n  return new AttachmentService(persistedStorage);\n}\n\nexport default createAttachmentManager;\n","import firebase from 'firebase/app';\nimport 'firebase/database';\nimport 'firebase/storage';\n\nimport { Database, FirebaseConfig } from '../types';\nimport { convertJsonToArrayWithIds } from '../util';\n\nclass FirebaseManager implements Database {\n  db: firebase.database.Database;\n  storage: firebase.storage.Storage;\n\n  constructor(config: FirebaseConfig) {\n    const app = firebase.initializeApp(config);\n    this.db = app.database();\n    this.storage = app.storage();\n  }\n\n  async read(path: string) {\n    return this.db\n      .ref(path)\n      .once('value')\n      .then(s => s.val());\n  }\n\n  async write(path: string, data: any) {\n    return this.db.ref(path).set(data);\n  }\n\n  async push(basePath: string, data: any) {\n    return this.db.ref(basePath).push(data);\n  }\n\n  /** Gets all documents with their id's in collection */\n  async findAll(path: string) {\n    return this.db.ref(path).once('value')\n    .then(s => s.val() || {}).then(convertJsonToArrayWithIds)\n  }\n\n  async delete(path: string, _id: firebase.database.Reference) {\n    return this.db.ref(`${path}/${_id}`).remove();\n  }\n\n  onChange(path: string, cb: (data: any) => void) {\n    this.db.ref(path).on('value', (s) => cb(convertJsonToArrayWithIds(s.val())));\n  }\n\n}\n\nfunction createFirebaseDbManager(config: FirebaseConfig) {\n  return new FirebaseManager(config);\n}\n\nexport default createFirebaseDbManager;\n","import { Form, Database } from '../types';\n\nclass FormService {\n  private storage: Database;\n\n  constructor(database: Database) {\n    this.storage = database;\n  }\n\n  async addForm(form: Form) {\n    return this.storage.push('tehillim', form);\n  }\n\n  async removeForm(_id: firebase.database.Reference) {\n    return this.storage.delete('tehillim', _id);\n  }\n\n  async updateForm(_id: firebase.database.Reference, newForm: Form) {\n    return this.storage.write(`tehillim/${_id}`, newForm);\n  }\n\n  async getAllForms(): Promise<Form[]> {\n    return this._alphabetize(await this.storage.findAll('tehillim'));\n  }\n\n  onFormsChanged(cb: (tehillim: Form[]) => void) {\n    this.storage.onChange('tehillim', data => cb(this._alphabetize(data)));\n  }\n\n  _alphabetize(tehillim: Form[]) {\n    return tehillim ? tehillim.sort((a, b) => a.firstName > b.firstName ? 1 : a.firstName < b.firstName ? -1 : 0) : [];\n  }\n}\n\nfunction createFormManager(persistedStorage: Database) {\n  return new FormService(persistedStorage);\n}\n\nexport default createFormManager;\n","import { FirebaseConfig } from '../types';\n\nimport createScheduleManager from './ScheduleService';\nimport createAttachmentManager from './AttachmentService';\nimport createFirebaseDbManager from './DatabaseService';\nimport createFormManager from './FormService';\n\nconst firebaseConfig: FirebaseConfig = {\n  apiKey: \"AIzaSyDUNiNW3dfplmHAq65wfKIGGSHS8MGXgzM\",\n  authDomain: \"sca-rab-schedules.firebaseapp.com\",\n  databaseURL: \"https://sca-rab-schedules.firebaseio.com\",\n  projectId: \"sca-rab-schedules\",\n  storageBucket: \"sca-rab-schedules.appspot.com\",\n  messagingSenderId: \"893196040077\",\n  appId: \"1:893196040077:web:75ee18b5d771028f616fc4\"\n}\n\nconst database = createFirebaseDbManager(firebaseConfig);\nconst scheduleManager = createScheduleManager(database);\nconst attachmentManager = createAttachmentManager(database);\nconst formManager = createFormManager(database);\n\nexport { database, scheduleManager, attachmentManager, formManager };\n","import React, { useState, useEffect } from 'react';\nimport { useDropzone } from 'react-dropzone';\nimport FileUploader from 'react-firebase-file-uploader';\nimport { database } from '../../service/index';\nimport spinner from '../assets/spinner.gif';\n\ninterface ImageDropBoxProps {\n  onImageDropped: (image: string) => void;\n  currentImage?: string;\n}\nconst ImageDropBox: React.FC<ImageDropBoxProps> = ({\n  onImageDropped,\n  currentImage,\n}) => {\n  const [previewImage, setPreviewImage] = useState(currentImage);\n\n  useEffect(() => setPreviewImage(currentImage), [currentImage]);\n\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({\n    onDrop: (files: File[]) => {\n      const file = files[0];\n      const imageExt = /^([a-zA-Z0-9\\s_\\\\.\\-:])+(.jpg|.jpeg|.png)$/;\n      if (!imageExt.test(file.name.toLowerCase())) {\n        return alert(\n          'Only files with .jpg or .jpeg or .png extensions are allowed here.',\n        );\n      }\n      /* convertImageFileToBase64Str(file).then(base64URL => {\n        setPreviewImage(base64URL as string);\n        onImageDropped(base64URL as string);\n      }); */\n    },\n  });\n\n  const handleUploadStart = (file) => {\n    setPreviewImage(spinner as string);\n  };\n\n  const handleUploadSuccess = (file) => {\n    database\n      .storage\n      .ref(\"/logos\")\n      .child(file)\n      .getDownloadURL()\n      .then(url => {\n        setPreviewImage(url as string);\n        onImageDropped(url as string);\n      });\n  };\n\n  return (\n    <div className=\"image-dropper mt-2\">\n      <form>\n        <FileUploader\n          accept=\"image/*\"\n          randomizeFilename\n          storageRef={database.storage.ref(\"/logos\")}\n          metadata={{cacheControl: 'max-age=2592000'}}\n          onUploadStart={handleUploadStart}\n          onUploadSuccess={handleUploadSuccess}\n          id=\"image-drop\"\n        />\n        <label htmlFor=\"image-drop\">\n          <p>\n            Drop logo here\n            <br />\n            (or click to choose file)\n          </p>\n        </label>\n      </form>\n      {!!previewImage && <img src={previewImage} className=\"logo\" />}\n    </div>\n  );\n};\n\nexport default ImageDropBox;\n","import React from 'react';\n\nimport moment from 'moment';\nimport * as linkify from 'linkifyjs';\nimport { Schedule } from '../../types';\nimport { filterDataFrameRows } from '../../util';\n\ninterface SmartTextProps {\n  input: string;\n}\n/** If input contains a link, SmartText will replace it with a clickable ancor tag */\nconst SmartText: React.FC<SmartTextProps> = ({ input }) => {\n  const urls = linkify.find(input);\n  if (urls.length === 0) {\n    return <p>{input}</p>;\n  }\n  const { value, type } = urls[0];\n  return <a href={value}>{type === 'url' ? 'Click here' : value}</a>;\n};\n\ninterface LiveItemsProps {\n  schedules: Schedule[];\n  filter?: {\n    type: string,\n    match: string,\n  };\n  heading: string;\n}\n\nconst LiveItems: React.FC<LiveItemsProps> = ({ schedules, filter, heading }) => {\n  const rows = [];\n  schedules.forEach(schedule => {\n    const filteredRows = filter?.match === 'minyan'\n      ? filterDataFrameRows(filter.type, filter.match, schedule.rows)\n      : schedule.rows;\n    rows.push(...filteredRows);\n  });\n  const headerRows = rows[0];\n\n  if (rows.length === 1) {\n    // No rows matched the filter criteria\n    return null;\n  }\n\n  const days = [\n    \"Sun\",\n    \"Mon\",\n    \"Tue\",\n    \"Wed\",\n    \"Thu\",\n    \"Fri\",\n    \"Sat\"\n  ]\n\n  const now = new Date();\n\n  const filteredByDay = rows.filter((row) => {\n    let flag = false;\n    const rowDays = row[2];\n    if (rowDays.includes('Daily')) {\n      flag = true;\n    } else if (rowDays.includes(days[now.getDay()])) {\n      flag = true;\n    } else if (rowDays.includes('-')) {\n      const rowDaysArr = rowDays.split(/[^\\w-]/);\n      rowDaysArr.forEach(rowDay => {\n        if (rowDay.includes('-')) {\n          const leftRight = rowDay.split('-');\n          const left = days.findIndex((v) => {\n            return leftRight[0].includes(v);\n          })\n          const right = days.findIndex((v) => {\n            return leftRight[1].includes(v);\n          })\n          if (left < now.getDay() && right > now.getDay()) {\n            flag = true;\n          }\n        }\n      });\n    }\n    return flag\n  })\n\n  const filteredByTime = filteredByDay.filter(row => {\n    const rowTimes = row[3].match(/\\d\\d?:\\d\\d ?(?:[AP]M)?/g);\n    if (!rowTimes[0].toLowerCase().includes('pm') && row[3].toLowerCase().includes('pm')) {\n      rowTimes[0]+=' pm';\n    }\n    const startTime = moment(rowTimes[0], 'h:mm:ss a');\n    const endTime = rowTimes.length > 1 ? moment(rowTimes[1], 'h:mm:ss a') : moment(startTime).add(1,'h');\n    startTime.subtract(5, 'm')\n\n    return moment(now).isBetween(startTime, endTime, null, '[)')\n  })\n\n  if (!filteredByTime.length) {\n    return null;\n  }\n\n  return (\n    <div className=\"schedule-card my-5\">\n      <div className=\"card-header row\">\n        <h1 className=\"schedule-title\">{heading} Going on Right Now</h1>\n      </div>\n      <table className=\"table table-striped table-bordered table-hover shadow\">\n        <thead className=\"text-light\">\n          <tr>\n            {headerRows.map((col, idx) => (\n              <th key={idx}>{col}</th>\n            ))}\n          </tr>\n        </thead>\n        <tbody>\n          {filteredByTime.map((row, rowId) => (\n            <tr key={rowId}>\n              {row.map((cell, cellId) => (\n                <td key={cellId}>\n                  <SmartText\n                    input={cell}\n                  />\n                </td>\n              ))}\n            </tr>\n            )\n          )}\n        </tbody>\n      </table>\n    </div>\n  );\n};\n\nexport default LiveItems;","import React from 'react';\nimport { useLocation } from 'react-router-dom';\n\nimport { mainRoutes } from '../../AppNavigator';\nimport SCALogo from '../assets/SCALogo.png';\n\nconst Header: React.FC = props => {\n  const location = useLocation();\n  const pageName = mainRoutes[location.pathname]?.pageName;\n  return (\n    <>\n      <header className=\"navbar fixed-top bg-light shadow\">\n        <div className=\"w-100 d-flex justify-content-between\">\n          <a href=\"/#\">\n            <img\n              className=\"navbar-brand py-0\"\n              src={SCALogo}\n              alt=\"SCA\"\n              height=\"60\"\n            />\n          </a>\n        </div>\n        <nav className=\"site-nav w-100 d-flex my-3\">\n          <a href=\"/#/classes\">Classes</a>\n          <a href=\"/#/minyanim\">Minyanim</a>\n          <a href=\"/#/letters\">Letters</a>\n          <a href=\"/#/tehillim\">Tehillim Request</a>\n          <a href=\"mailto:info@scaupdates.org\">Contact</a>\n        </nav>\n\n        <h5 className=\"w-100 text-center header-title m-0\">\n          {pageName ? pageName : ''}\n        </h5>\n      </header>\n      <div className=\"header-spacing\"></div>\n    </>\n  );\n};\n\nexport default Header;\n","import React, { useState } from 'react';\nimport { ScheduleCard, LiveItems } from '../components';\n\nimport { Schedule } from '../../types';\nimport { useLocation } from 'react-router-dom';\n\ninterface ClassesScreenProps {\n  schedules: Schedule[];\n}\n\nconst ClassesScreen: React.FC<ClassesScreenProps> = ({ schedules }) => {\n  const [filterType, setfilterType] = useState<string>('none');\n  const [filterVal, setFilterVal] = useState<string>('');\n  const [heading, setHeading] = useState<string>('Classes');\n  const location = useLocation();\n\n  if (location.pathname === '/minyanim' && filterType !== 'topic') {\n    setHeading('Minyanim');\n    setfilterType('topic');\n    setFilterVal('minyan');\n  }\n\n  return (\n    <>\n      <div className=\"container\">\n        <LiveItems \n          schedules={schedules}\n          filter={\n            !(filterType === 'none' || filterVal === '') && {\n              type: filterType,\n              match: filterVal,\n            }\n          }\n          heading={heading}\n        />\n      </div>\n      <div className=\"container\">\n        <div className=\"row\">\n          <div className=\"input-group mt-3\">\n            <label\n              htmlFor=\"filter\"\n              className={filterType === 'topic' ? 'hidden' : 'header-title'}>\n              Filter By:{' '}\n              <select\n                name=\"filter\"\n                onChange={e => setfilterType(e.target.value)}\n                id=\"\"\n                value={filterType}>\n                <option value=\"none\">No filter</option>\n                <option value=\"time\">Time of day</option>\n                <option value=\"day\">Day of week</option>\n                <option value=\"class\">Class</option>\n                <option value=\"teacher\">Teacher</option>\n              </select>\n              {filterType !== 'none' && (\n                <input\n                  type=\"text\"\n                  className=\"ml-2\"\n                  onChange={e => setFilterVal(e.target.value.toLowerCase())}\n                  placeholder={`Enter ${filterType}(s)`}\n                />\n              )}\n            </label>\n          </div>\n        </div>\n        {schedules.map((schedule, idx) => {\n          return (\n            <ScheduleCard\n              key={idx}\n              schedule={schedule}\n              filter={\n                !(filterType === 'none' || filterVal === '') && {\n                  type: filterType,\n                  match: filterVal,\n                }\n              }\n            />\n          );\n        })}\n      </div>\n    </>\n  );\n};\n\nexport default ClassesScreen;\n","import React, { useState, useEffect } from 'react';\n\nimport { SpreadSheetDropBox, ImageDropBox } from '../components';\nimport { Schedule, DataFrame } from '../../types';\n\ninterface SchedulePreviewItemProps {\n  schedule: Schedule;\n  isEditing: boolean;\n  onUpdateBtnPressed: () => void;\n  onDeleteBtnPressed: () => void;\n}\nconst SchedulePreviewItem: React.FC<SchedulePreviewItemProps> = ({\n  schedule,\n  isEditing,\n  onUpdateBtnPressed,\n  onDeleteBtnPressed,\n}) => (\n  <li className=\"list-group-item d-flex justify-content-between my-2\">\n    <h3>{schedule.title}</h3>\n\n    {isEditing ? (\n      <button className=\"btn btn-danger m-1\" onClick={onDeleteBtnPressed}>\n        x\n      </button>\n    ) : (\n      <button className=\"btn btn-warning\" onClick={onUpdateBtnPressed}>\n        <i className=\"fas fa-edit text-light\"></i>\n      </button>\n    )}\n  </li>\n);\n\ninterface AdminScreenProps {\n  schedules: Schedule[];\n  createSchedule: (\n    newSchedule: Schedule,\n  ) => Promise<firebase.database.Reference> | void;\n  deleteSchedule: (_id: firebase.database.Reference) => Promise<boolean>;\n  updateSchedule: (\n    _id: firebase.database.Reference,\n    updatedSchedule: Schedule,\n  ) => Promise<boolean>;\n}\n\nconst AdminScreen: React.FC<AdminScreenProps> = ({\n  schedules,\n  createSchedule,\n  deleteSchedule,\n  updateSchedule,\n}) => {\n  const [scheduleBeingEdited, setScheduleBeingEdited] = useState<Schedule>(\n    undefined,\n  );\n  const updateScheduleBeingEdited = updates =>\n    setScheduleBeingEdited({ ...scheduleBeingEdited, ...updates });\n\n  const onSaveBtnPressed = () => {\n    const { title, rows, logo } = scheduleBeingEdited;\n    const newSchedule = { title, rows, logo };\n    if (scheduleBeingEdited._id) {\n      updateSchedule(scheduleBeingEdited._id, newSchedule);\n    } else {\n      createSchedule(newSchedule);\n    }\n    setScheduleBeingEdited(undefined);\n  };\n\n  useEffect(() => {\n    console.log(scheduleBeingEdited);\n  }, [scheduleBeingEdited]);\n  return (\n    <div className=\"admin-page-container\">\n      <div className=\"schedule-manager-widget row mt-5 py-5\">\n        <div className=\"col scroll-content\">\n          {schedules.map((schedule, idx) => (\n            <SchedulePreviewItem\n              key={idx}\n              schedule={schedule}\n              isEditing={scheduleBeingEdited?._id === schedule._id}\n              onUpdateBtnPressed={() => setScheduleBeingEdited(schedule)}\n              onDeleteBtnPressed={() => deleteSchedule(schedule._id)}\n            />\n          ))}\n        </div>\n        <div className=\"col schedule-upload-container\">\n          <div className=\"text-center\">\n            <h3 className=\"text-light\">\n              {!!scheduleBeingEdited\n                ? 'Update Schedule:'\n                : 'Upload Schedule Here:'}\n            </h3>\n          </div>\n          <input\n            type=\"text\"\n            className=\"form-control\"\n            placeholder=\"Schedule Title\"\n            value={scheduleBeingEdited?.title || ''}\n            onChange={e => updateScheduleBeingEdited({ title: e.target.value })}\n          />\n          <ImageDropBox\n            onImageDropped={logo => updateScheduleBeingEdited({ logo })}\n            currentImage={scheduleBeingEdited?.logo}\n          />\n          <SpreadSheetDropBox\n            onSpreadSheetDropped={rows => updateScheduleBeingEdited({ rows })}\n            currentSpreadSheet={scheduleBeingEdited?.rows}\n          />\n\n          <button className=\"btn btn-success\" onClick={onSaveBtnPressed}>\n            {scheduleBeingEdited?._id ? 'Save updates' : 'Upload Schedule'}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default AdminScreen;\n","import React, { useState } from 'react';\nimport { AttachmentCard } from '../components';\n\nimport { Attachment } from '../../types';\n\ninterface AttachmentScreenProps {\n  attachments: Attachment[];\n}\n\nconst AttachmentScreen: React.FC<AttachmentScreenProps> = ({ attachments }) => {\n  return (\n    <>\n      <div className=\"container\">\n        <div className=\"row align-items-stretch\">\n          {attachments.map((attachment, idx) => {\n            return (\n              <AttachmentCard\n                key={idx}\n                attachment={attachment}\n              />\n            );\n          })}\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default AttachmentScreen;\n","import React, { useState, useEffect } from 'react';\n\nimport { ImageDropBox } from '../components';\nimport { Attachment } from '../../types';\nimport FileUploader from 'react-firebase-file-uploader';\nimport { database } from '../../service/index';\nimport spinner from '../assets/spinner.gif';\n\ninterface AttachmentPreviewItemProps {\n  attachment: Attachment;\n  isEditing: boolean;\n  onUpdateBtnPressed: () => void;\n  onDeleteBtnPressed: () => void;\n}\nconst AttachmentPreviewItem: React.FC<AttachmentPreviewItemProps> = ({\n  attachment,\n  isEditing,\n  onUpdateBtnPressed,\n  onDeleteBtnPressed,\n}) => (\n  <li className=\"list-group-item d-flex justify-content-between my-2\">\n    <h3>{attachment.title}</h3>\n\n    {isEditing ? (\n      <button className=\"btn btn-danger m-1\" onClick={onDeleteBtnPressed}>\n        x\n      </button>\n    ) : (\n      <button className=\"btn btn-warning\" onClick={onUpdateBtnPressed}>\n        <i className=\"fas fa-edit text-light\"></i>\n      </button>\n    )}\n  </li>\n);\n\ninterface AttachmentsAdminScreenProps {\n  attachments: Attachment[];\n  createAttachment: (\n    newAttachment: Attachment,\n  ) => Promise<firebase.database.Reference> | void;\n  deleteAttachment: (_id: firebase.database.Reference) => Promise<boolean>;\n  updateAttachment: (\n    _id: firebase.database.Reference,\n    updatedAttachment: Attachment,\n  ) => Promise<boolean>;\n}\n\nconst AdminScreen: React.FC<AttachmentsAdminScreenProps> = ({\n  attachments,\n  createAttachment,\n  deleteAttachment,\n  updateAttachment,\n}) => {\n  const [attachmentBeingEdited, setAttachmentBeingEdited] = useState<Attachment>(\n    undefined,\n  );\n  const updateAttachmentBeingEdited = updates =>\n  setAttachmentBeingEdited({ ...attachmentBeingEdited, ...updates });\n  let uploading = false;\n\n  const onSaveBtnPressed = () => {\n    const { title, file, cover, body } = attachmentBeingEdited;\n    const newAttachment = { title, file, cover: cover || '', body: body || ''};\n    if (attachmentBeingEdited._id) {\n      updateAttachment(attachmentBeingEdited._id, newAttachment);\n    } else {\n      createAttachment(newAttachment);\n    }\n    setAttachmentBeingEdited(undefined);\n  };\n\n  const handleUploadSuccess = (file) => {\n    database\n      .storage\n      .ref(\"/attachments\")\n      .child(file)\n      .getDownloadURL()\n      .then(url => {\n        updateAttachmentBeingEdited({file: url as string});\n        uploading = false;\n      });\n  };\n\n  const handleUploadStart = (file) => {\n    uploading = true;\n  };\n\n  useEffect(() => {\n    console.log(attachmentBeingEdited);\n  }, [attachmentBeingEdited]);\n  return (\n    <div className=\"admin-page-container\">\n      <div className=\"schedule-manager-widget row mt-5 py-5\">\n        <div className=\"col scroll-content\">\n          {attachments.map((attachment, idx) => (\n            <AttachmentPreviewItem\n              key={idx}\n              attachment={attachment}\n              isEditing={attachmentBeingEdited?._id === attachment._id}\n              onUpdateBtnPressed={() => setAttachmentBeingEdited(attachment)}\n              onDeleteBtnPressed={() => deleteAttachment(attachment._id)}\n            />\n          ))}\n        </div>\n        <div className=\"col schedule-upload-container\">\n          <div className=\"text-center\">\n            <h3 className=\"text-light\">\n              {!!attachmentBeingEdited\n                ? 'Update Attachment:'\n                : 'Upload Attachment Here:'}\n            </h3>\n          </div>\n          <input\n            type=\"text\"\n            className=\"form-control\"\n            placeholder=\"Attachment Title\"\n            value={attachmentBeingEdited?.title || ''}\n            onChange={e => updateAttachmentBeingEdited({ title: e.target.value })}\n          />\n          <ImageDropBox\n            onImageDropped={cover => updateAttachmentBeingEdited({ cover })}\n            currentImage={attachmentBeingEdited?.cover}\n          />\n          \n          <div className=\"image-dropper mt-2\">\n            <form>\n              <FileUploader\n                randomizeFilename\n                metadata={{cacheControl: 'max-age=2592000'}}\n                storageRef={database.storage.ref(\"/attachments\")}\n                onUploadStart={handleUploadStart}\n                onUploadSuccess={handleUploadSuccess}\n                id=\"file-drop\"\n              />\n              <label htmlFor=\"file-drop\">\n                <p>\n                  Drop attachment here\n                  <br />\n                  (or click to choose file)\n                </p>\n              </label>\n            </form>\n            {!!uploading && <img src={spinner} />}\n            {!!attachmentBeingEdited?.file && <a href={attachmentBeingEdited.file} target=\"_blank\">Preview</a>}\n          </div>\n\n          <textarea\n            className=\"form-control mt-2\"\n            placeholder=\"Caption\"\n            value={attachmentBeingEdited?.body || ''}\n            onChange={e => updateAttachmentBeingEdited({ body: e.target.value })}\n          />\n\n          <button className=\"btn btn-success mt-2\" onClick={onSaveBtnPressed}>\n            {attachmentBeingEdited?._id ? 'Save updates' : 'Upload Attachment'}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default AdminScreen;\n","import React, { useState, useEffect } from 'react';\n\nimport { Form } from '../../types';\nimport { database } from '../../service/index';\n\ninterface FormScreenProps {\n  forms: Form[];\n}\n\nconst FormScreen: React.FC<FormScreenProps> = ({ forms }) => {\n  const [firstName, setFirstName] = useState<string>('');\n  const [benbat, setBenbat] = useState<string>('');\n  const [mothersName, setMothersName] = useState<string>('');\n  const [formMessage, setFormMessage] = useState<string>('');\n\n  const success = (e) => {\n    setFirstName('');\n    setBenbat('');\n    setMothersName('');\n    setFormMessage('Submitted!');\n    setTimeout(() => {\n      setFormMessage('');\n    }, 2000);\n  }\n\n  const fail = (e) => {\n    setFormMessage('Error');\n  }\n\n  const submit = (e) => {\n    e.preventDefault();\n    database.push('tehillim', {firstName, benbat, mothersName}).then(success, fail);\n  }\n  \n  return (\n    <>\n      <div className=\"container\">\n        <p>\n          We are compiling a list of those who have fallen ill to share with the community so that we may dedicate our prayers and learning in the merit of their complete and speedy recovery.\n        </p>\n        <form onSubmit={submit}>\n          <div className=\"form-group\">\n            <label htmlFor=\"firstName\">Hebrew First Name</label>\n            <input type=\"text\" id=\"firstName\" className=\"form-control\" onChange={e => setFirstName(e.target.value)} value={firstName} required />\n          </div>\n          <div className=\"form-group\">\n            <label>Ben/Bat</label>\n            <div className=\"form-check\">\n              <input type=\"radio\" id=\"ben\" name=\"benbat\" value=\"ben\" checked={!!(benbat === 'ben')} onChange={e => e.target.checked && setBenbat(e.target.value)} required />\n              <label htmlFor=\"ben\"> Ben</label>\n            </div>\n            <div className=\"form-check\">\n              <input type=\"radio\" id=\"bat\" name=\"benbat\" value=\"bat\" checked={!!(benbat === 'bat')} onChange={e => e.target.checked && setBenbat(e.target.value)} />\n              <label htmlFor=\"bat\"> Bat</label>\n            </div>\n          </div>\n          <div className=\"form-group\">\n            <label htmlFor=\"mothersName\">Mother's Hebrew Name</label>\n            <input type=\"text\" id=\"mothersName\" className=\"form-control\" onChange={e => setMothersName(e.target.value)} value={mothersName} required />\n          </div>\n          <div className=\"form-group\">\n            <button type=\"submit\" className=\"btn btn-primary btn-lg\">Submit</button>\n            {!!formMessage && (<span className=\"alert\">{formMessage}</span>)}\n          </div>\n        </form>\n      </div>\n      <div className=\"container my-5\">\n        <table className=\"table table-striped table-bordered table-hover shadow\">\n          <thead className=\"text-light\">\n            <tr>\n              <th>Please dedicate prayers and learning in the merit of their complete and speedy recovery.</th>\n            </tr>\n          </thead>\n          <tbody>\n          {forms.map((person, idx) => {\n            return (\n              <tr key={idx}>\n                <td>{person.firstName} {person.benbat} {person.mothersName}</td>\n              </tr>\n            )\n          })}\n          </tbody>\n        </table>\n      </div>\n\n    </>\n  );\n};\n\nexport default FormScreen;\n","import React from 'react';\nimport SCALogo from '../assets/SCALogo.png';\n\nconst IndexScreen: React.FC = () => {\n  return (\n    <>\n      <div className=\"container\">\n        <img\n          src={SCALogo}\n          className=\"centered-image my-3\"\n          height=\"150\"\n          alt=\"\"\n        />\n      </div>\n      <div className=\"w-100 d-flex align-items-center justify-content-center\">\n        <nav className=\"d-flex flex-column align-items-center my-3 site-nav-index\">\n          <a href=\"/#/classes\" className=\"btn btn-primary btn-lg my-3\">\n            Schedule of Live Classes\n          </a>\n          <a href=\"/#/minyanim\" className=\"btn btn-primary btn-lg my-3\">\n            Schedule of Live Minyanim\n          </a>\n          <a href=\"/#/letters\" className=\"btn btn-primary btn-lg my-3\">\n            Letters to the Community\n          </a>\n          <a href=\"/#/tehillim\" className=\"btn btn-primary btn-lg my-3\">\n            Request Tehillim for Refuah\n          </a>\n          <a\n            href=\"mailto:info@scaupdates.org\"\n            className=\"btn btn-primary btn-lg my-3\">\n            Contact the SCA\n          </a>\n          <a\n            href=\"https://firebasestorage.googleapis.com/v0/b/sca-rab-schedules.appspot.com/o/attachments%2FSCA_Pre-Pesah%20Day%20of%20Learning.pdf?alt=media&token=9552d20f-b3a4-4751-b843-e5f99ebf32dc\"\n            target=\"_blank\"\n            className=\"btn btn-secondary btn-lg my-3\">\n            Pre Pesach Day of Learning\n          </a>\n        </nav>\n      </div>\n    </>\n  );\n};\n\nexport default IndexScreen;\n","import React, { useEffect, useState } from 'react';\nimport { Schedule } from '../types';\nimport { ClassesScreen } from '../ui';\nimport { scheduleManager } from '../service';\n\nconst ClassesScreenCreator = () => {\n  const [schedules, setSchedules] = useState<Schedule[]>([]);\n\n  useEffect(() => {\n    scheduleManager.onSchedulesChanged(setSchedules);\n  }, []);\n\n  return <ClassesScreen schedules={schedules} />;\n};\n\nexport default ClassesScreenCreator;\n","import React from 'react';\nimport { HashRouter, Route } from 'react-router-dom';\n\nimport { Header } from './ui/components';\nimport {\n  ClassesScreenCreator,\n  AdminScreenCreator,\n  AttachmentsAdminScreenCreator,\n  AttachmentsScreenCreator,\n  FormScreenCreator,\n  IndexScreenCreator,\n} from './factory';\n\ninterface RouteMap {\n  [path: string]: RouteConfig;\n}\ninterface RouteConfig {\n  exact?: boolean;\n  pageName?: string; // For display purposes\n  Component: React.ComponentType;\n}\n\nconst renderRoutes = (routes: RouteMap) =>\n  Object.entries(routes).map(([path, { exact, Component }]) => (\n    <Route path={path} exact={exact} component={Component} />\n  ));\n\nexport const adminRoutes: RouteMap = {\n  '/': { exact: true, Component: AdminScreenCreator },\n  '/edit-letters': { exact: true, Component: AttachmentsAdminScreenCreator },\n};\n\nconst AdminNavigator = () => (\n  <HashRouter basename=\"/admin\">{renderRoutes(adminRoutes)}</HashRouter>\n);\n\nexport const mainRoutes: RouteMap = {\n  '/': { exact: true, Component: IndexScreenCreator, pageName: 'SCA Affiliate Synagogue'},\n  '/classes': {\n    exact: true,\n    Component: ClassesScreenCreator,\n    pageName: 'SCA Affiliate Synagogue - Virtual Classes Schedules',\n  },\n  '/minyanim': {\n    exact: true,\n    Component: ClassesScreenCreator,\n    pageName: 'SCA Affiliate Synagogue - Virtual Minyanim Schedules',\n  },\n  '/letters': {\n    exact: true,\n    Component: AttachmentsScreenCreator,\n    pageName: 'COVID-19 Letters',\n  },\n  '/tehillim': {\n    exact: true,\n    Component: FormScreenCreator,\n    pageName: 'SCA Tehilim Requests',\n  },\n  '/admin': { Component: AdminNavigator },\n};\n\nconst MainNavigator = () => (\n  <HashRouter>\n    <Header />\n    {renderRoutes(mainRoutes)}\n  </HashRouter>\n);\n\nexport default MainNavigator;\n","import React, { useEffect, useState } from 'react';\n\nimport { AdminScreen } from '../ui';\nimport { scheduleManager } from '../service';\nimport { Schedule, DataFrame } from '../types';\n\nconst AdminScreenCreator = () => {\n  const [currentSchedules, setCurrentSchedules] = useState<Schedule[]>([]);\n\n  useEffect(() => {\n    scheduleManager.onSchedulesChanged(setCurrentSchedules);\n  }, []);\n\n  const uploadSchedule = schedule => {\n    if (!schedule.rows) {\n      return alert('Please upload a spreadsheet first');\n    }\n    if (!schedule.title) {\n      return alert('Please enter the title of this table');\n    }\n    return scheduleManager.addSchedule(schedule);\n  };\n\n  const removeSchedule = _id => {\n    return scheduleManager.removeSchedule(_id);\n  };\n\n  const updateSchedule = (_id, updatedSchedule) => {\n    return scheduleManager.updateSchedule(_id, updatedSchedule);\n  };\n\n  return (\n    <AdminScreen\n      schedules={currentSchedules}\n      createSchedule={uploadSchedule}\n      updateSchedule={updateSchedule}\n      deleteSchedule={removeSchedule}\n    />\n  );\n};\n\nexport default AdminScreenCreator;\n","import React, { useEffect, useState } from 'react';\n\nimport { AttachmentsAdminScreen } from '../ui';\nimport { attachmentManager } from '../service';\nimport { Attachment } from '../types';\n\nconst AttachmentsAdminScreenCreator = () => {\n  const [currentAttachments, setCurrentAttachments] = useState<Attachment[]>([]);\n\n  useEffect(() => {\n    attachmentManager.onAttachmentsChanged(setCurrentAttachments);\n  }, []);\n\n  const uploadAttachment = attachment => {\n    if (!attachment.file) {\n      return alert('Please upload an attachment first');\n    }\n    if (!attachment.title) {\n      return alert('Please enter the title of this table');\n    }\n    return attachmentManager.addAttachment(attachment);\n  };\n\n  const removeAttachment = _id => {\n    return attachmentManager.removeAttachment(_id);\n  };\n\n  const updateAttachment = (_id, updatedAttachment) => {\n    return attachmentManager.updateAttachment(_id, updatedAttachment);\n  };\n\n  return (\n    <AttachmentsAdminScreen\n      attachments={currentAttachments}\n      createAttachment={uploadAttachment}\n      updateAttachment={updateAttachment}\n      deleteAttachment={removeAttachment}\n    />\n  );\n};\n\nexport default AttachmentsAdminScreenCreator;\n","import React, { useEffect, useState } from 'react';\nimport { IndexScreen } from '../ui';\n\nconst IndexScreenCreator = () => {\n  return <IndexScreen />;\n};\n\nexport default IndexScreenCreator;\n","import React, { useEffect, useState } from 'react';\nimport { Attachment } from '../types';\nimport { AttachmentsScreen } from '../ui';\nimport { attachmentManager } from '../service';\n\nconst AttachmentsScreenCreator = () => {\n  const [attachments, setAttachments] = useState<Attachment[]>([]);\n\n  useEffect(() => {\n    attachmentManager.onAttachmentsChanged(setAttachments);\n  }, []);\n\n  return <AttachmentsScreen attachments={attachments} />;\n};\n\nexport default AttachmentsScreenCreator;","import React, { useEffect, useState } from 'react';\nimport { FormScreen } from '../ui';\nimport { Form } from '../types';\nimport { formManager } from '../service';\n\nconst FormScreenCreator = () => {\n  const [forms, setForms] = useState<Form[]>([]);\n\n  useEffect(() => {\n    formManager.onFormsChanged(setForms);\n  }, []);\n\n  return <FormScreen forms={forms} />;\n};\n\nexport default FormScreenCreator;\n","import React from 'react';\n\nimport AppNavigator from './AppNavigator';\n\nconst App = () => <AppNavigator />;\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport 'bootstrap/dist/css/bootstrap.css';\nimport './ui/styles.css';\n\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}