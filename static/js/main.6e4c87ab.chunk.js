(this["webpackJsonpsca-rabbi-schedules"]=this["webpackJsonpsca-rabbi-schedules"]||[]).push([[0],{26:function(e,t,n){e.exports=n.p+"static/media/spinner.3acec546.gif"},27:function(e,t,n){e.exports=n.p+"static/media/SCALogo.80df96a3.png"},40:function(e,t){},51:function(e,t,n){e.exports=n.p+"static/media/on-air-indicator.fb6b3f3c.png"},52:function(e,t,n){e.exports=n.p+"static/media/sca-white.cbe6bec1.svg"},54:function(e,t,n){e.exports=n(89)},63:function(e,t,n){},71:function(e,t){},72:function(e,t){},89:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(45),i=n.n(c),u=n(21),s=(n(61),n(37),n(62),n(63),n(2)),o=n(14),l=n(18),m=n(11),h=n(19),f=n(24),d=n.n(f),p=(n(33),function(e){return Object.entries(e).map((function(e){var t=Object(s.a)(e,2),n=t[0],a=t[1];return Object(h.a)({_id:n},a)}))}),v=function(e,t,n){var a=Object(m.a)(n[0]),r=w(n,e);if(-1===r)return Object(m.a)(n);var c=n.slice(1).filter((function(e){var n=e[r];return n&&!n.toLowerCase().includes(t.toLowerCase())}));return[a].concat(c)},b=function(e,t,n){var a=Object(m.a)(n[0]),r=w(n,e);if(-1===r)return[a];var c=n.slice(1).filter((function(e){var n=e[r];return n&&n.toLowerCase().includes(t.toLowerCase())}));return[a].concat(c)},w=function(e,t){return e[0].findIndex((function(e){return e.toLowerCase().includes(t.toLowerCase())}))},E=n(46),g=function(e){var t=e.input,n=e.highlight,a=e.row,c=e.passwordCol,i=E.find(t),u=Object(o.f)(),s="";if(~c&&"-"!==a[c]&&(s="Password: ".concat(a[c])),0===i.length)return r.a.createElement("p",{className:n&&"highlight"},t);var l=i[0],m=l.value,h=l.type,f="/"===u.pathname?80:40;return r.a.createElement("span",null,r.a.createElement("a",{href:m,style:{height:f,width:f},className:m.includes("zoom")&&"url"===h?"zoomIcon":m.includes("gotomeeting")&&"url"===h?"gtmIcon":""},"url"===h?"Click here":m)," ",r.a.createElement("p",{className:"password"},s))},y=function(e){var t=e.schedule,n=e.filter,a=Object(o.f)(),c=t.title,i=t.rows,u=t.logo,s=n?b(n.type,n.match,i):v("type","minyan",i);if(1===s.length)return null;var l=s[0].reduce((function(e,t,n){return t.toString().toLowerCase().startsWith("hide")&&e.push(n),e}),[]),m=n&&i[0].findIndex((function(e){return e.toLowerCase().includes(n.type)})),h=i[0].findIndex((function(e){return e.toLowerCase().includes("password")})),f=function(e,t){if("topic"===(null===n||void 0===n?void 0:n.type)&&"/bekhorot"===a.pathname)return!1;var r=e.toLowerCase();return m===t&&r.includes(n.match)};return r.a.createElement("div",{className:"schedule-card my-5"},r.a.createElement("div",{className:"card-header"},!!u&&r.a.createElement("div",{className:"w-100"},r.a.createElement("img",{src:u,className:"logo ml-4"})),r.a.createElement("h1",{className:"schedule-title"},c)),r.a.createElement("table",{className:"table table-striped table-bordered table-hover shadow"},r.a.createElement("thead",{className:"text-light"},r.a.createElement("tr",null,s[0].map((function(e,t){if(!l.includes(t))return r.a.createElement("th",{key:t},e)})))),r.a.createElement("tbody",null,s.slice(1).map((function(e,t){return r.a.createElement("tr",{key:t},e.map((function(t,n){if(!l.includes(n))return r.a.createElement("td",{key:n},r.a.createElement(g,{input:t,row:e,passwordCol:h,highlight:f(t,n)}))})))})))))},k=(n(28),n(25),n(3)),j=n.n(k),C=n(5),O=n(7),N=n(10),x=function(){function e(t){Object(O.a)(this,e),this.storage=void 0,this.convertTimesToLocalTimezone=function(e){var t=function(e){return d()(e,"h:mm A").local().format("h:mm A")},n=e[0].findIndex((function(e){return e.toLowerCase().includes("time")}));return e.map((function(e,a){var r=Object(m.a)(e);if(a>0){var c=r[n].split("-").map((function(e){return e.trim()}));r[n]=c.map(t).join(" - \n")}return r}))},this.storage=t}return Object(N.a)(e,[{key:"getAllSchedules",value:function(){var t=Object(C.a)(j.a.mark((function t(){var n=this;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.storage.read(e.scheduleRef).then((function(e){return n.convertTimesToLocalTimezone(e)})));case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"onSchedulesChanged",value:function(t){var n=this;this.storage.onChange(e.scheduleRef,(function(e){t(n.convertTimesToLocalTimezone(e))}))}}]),e}();x.scheduleRef="1TS3fZHRPlhI4L_URhKJXGa48eOy6BiqM1GeSUJL9jFs/live-website-feed";var L=function(e){return new x(e)},S=function(){function e(t){Object(O.a)(this,e),this.storage=void 0,this.storage=t}return Object(N.a)(e,[{key:"addAttachment",value:function(){var e=Object(C.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.storage.push("attachments",t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"removeAttachment",value:function(){var e=Object(C.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.storage.delete("attachments",t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateAttachment",value:function(){var e=Object(C.a)(j.a.mark((function e(t,n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.storage.write("attachments/".concat(t),n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getAllAttachments",value:function(){var e=Object(C.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,this.storage.findAll("attachments");case 3:return e.t1=e.sent,e.abrupt("return",e.t0._alphabetize.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onAttachmentsChanged",value:function(e){var t=this;this.storage.onChange("attachments",(function(n){return e(t._alphabetize(p(n)))}))}},{key:"_alphabetize",value:function(e){return e?e.sort((function(e,t){return e.title>t.title?1:e.title<t.title?-1:0})):[]}}]),e}();var A=function(e){return new S(e)},T=n(50),I=n.n(T),F=(n(86),n(90),function(){function e(t){Object(O.a)(this,e),this.db=void 0,this.storage=void 0;var n=I.a.initializeApp(t);this.db=n.database(),this.storage=n.storage()}return Object(N.a)(e,[{key:"read",value:function(){var e=Object(C.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.db.ref(t).once("value").then((function(e){return e.val()})));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"write",value:function(){var e=Object(C.a)(j.a.mark((function e(t,n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.db.ref(t).set(n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"push",value:function(){var e=Object(C.a)(j.a.mark((function e(t,n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.db.ref(t).push(n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"findAll",value:function(){var e=Object(C.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.db.ref(t).once("value").then((function(e){return e.val()||{}})).then(p));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(C.a)(j.a.mark((function e(t,n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.db.ref("".concat(t,"/").concat(n)).remove());case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onChange",value:function(e,t){this.db.ref(e).on("value",(function(e){return t(e.val())}))}}]),e}());var z=function(e){return new F(e)},D=function(){function e(t){Object(O.a)(this,e),this.storage=void 0,this.storage=t}return Object(N.a)(e,[{key:"addForm",value:function(){var e=Object(C.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.storage.push("tehillim",t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"removeForm",value:function(){var e=Object(C.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.storage.delete("tehillim",t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateForm",value:function(){var e=Object(C.a)(j.a.mark((function e(t,n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.storage.write("tehillim/".concat(t),n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getAllForms",value:function(){var e=Object(C.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,this.storage.findAll("tehillim");case 3:return e.t1=e.sent,e.abrupt("return",e.t0._alphabetize.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onFormsChanged",value:function(e){var t=this;this.storage.onChange("tehillim",(function(n){return e(t._alphabetize(p(n)))}))}},{key:"_alphabetize",value:function(e){return e?e.sort((function(e,t){return e.firstName>t.firstName?1:e.firstName<t.firstName?-1:0})):[]}}]),e}();var M=function(e){return new D(e)},W=z({apiKey:"AIzaSyDUNiNW3dfplmHAq65wfKIGGSHS8MGXgzM",authDomain:"sca-rab-schedules.firebaseapp.com",databaseURL:"https://sca-rab-schedules.firebaseio.com",projectId:"sca-rab-schedules",storageBucket:"sca-rab-schedules.appspot.com",messagingSenderId:"893196040077",appId:"1:893196040077:web:75ee18b5d771028f616fc4"}),_=L(W),B=(A(W),M(W),n(26),n(6)),R=n.n(B),U=function(e){var t=e.schedules,n=e.filter,a=e.heading,c=[];t.forEach((function(e){var t,a="minyan"===(null===n||void 0===n?void 0:n.match)?b(n.type,n.match,e.rows):v("type","minyan",e.rows);(t=c).push.apply(t,Object(m.a)(a))}));var i=c[0];if(c.length<2)return null;c=b("toggle","show",c);var u=i.findIndex((function(e){return e.toLowerCase().includes("days")})),s=i.findIndex((function(e){return e.toLowerCase().includes("time")})),o=i.findIndex((function(e){return e.toLowerCase().includes("password")})),l=i.reduce((function(e,t,n){return(t.toString().toLowerCase().startsWith("hide")||t.toString().toLowerCase().startsWith("days"))&&e.push(n),e}),[]),h=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],f=new Date,d=c.filter((function(e){var t=!1,n=e[u];if(n.includes("Daily"))t=!0;else if(n.includes(h[f.getDay()]))t=!0;else if(n.includes("-")){n.split(/[^\w-]/).forEach((function(e){if(e.includes("-")){var n=e.split("-"),a=h.findIndex((function(e){return n[0].includes(e)})),r=h.findIndex((function(e){return n[1].includes(e)}));a<f.getDay()&&r>f.getDay()&&(t=!0)}}))}return t})),p=[],w=[],E=[];return d.forEach((function(e){var t=e[s].match(/\d\d?:\d\d ?(?:[AP]M)?/g);if(!t)return!1;!t[0].toLowerCase().includes("pm")&&e[3].toLowerCase().includes("pm")&&(t[0]+=" pm");var n=R()(t[0],"h:mm:ss a"),a=t.length>1?R()(t[1],"h:mm:ss a"):R()(n).add(1,"h");n.subtract(10,"m"),R()(f).isBetween(n,a,null,"[)")?p.push(e):R()(f).isSameOrAfter(a)?w.push(e):R()(f).isBefore(n)&&E.push(e)})),r.a.createElement("div",{className:"schedule-card my-5"},p.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"card-header"},r.a.createElement("h1",{className:"schedule-title"},"Ongoing ",a)),r.a.createElement("table",{className:"table table-striped table-bordered table-hover shadow"},r.a.createElement("thead",{className:"text-light"},r.a.createElement("tr",null,i.map((function(e,t){if(!l.includes(t))return r.a.createElement("th",{key:t},e)})))),r.a.createElement("tbody",null,p.map((function(e,t){return r.a.createElement("tr",{key:t},e.map((function(t,n){if(!l.includes(n))return r.a.createElement("td",{key:n},r.a.createElement(g,{input:t,passwordCol:o,row:e}))})))}))))),E.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"card-header"},r.a.createElement("h1",{className:"schedule-title"},"Upcoming ",a)),r.a.createElement("table",{className:"table table-striped table-bordered table-hover shadow"},r.a.createElement("thead",{className:"text-light"},r.a.createElement("tr",null,i.map((function(e,t){if(!l.includes(t))return r.a.createElement("th",{key:t},e)})))),r.a.createElement("tbody",null,E.map((function(e,t){return r.a.createElement("tr",{key:t},e.map((function(t,n){if(!l.includes(n))return r.a.createElement("td",{key:n},r.a.createElement(g,{input:t,passwordCol:o,row:e}))})))}))))),w.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"card-header"},r.a.createElement("h1",{className:"schedule-title"},"Completed ",a)),r.a.createElement("table",{className:"table table-striped table-bordered table-hover shadow"},r.a.createElement("thead",{className:"text-light"},r.a.createElement("tr",null,i.map((function(e,t){if(!l.includes(t))return r.a.createElement("th",{key:t},e)})))),r.a.createElement("tbody",null,w.map((function(e,t){return r.a.createElement("tr",{key:t},e.map((function(t,n){if(!l.includes(n))return r.a.createElement("td",{key:n},r.a.createElement(g,{input:t,passwordCol:o,row:e}))})))}))))))},G=(n(53),n(88),n(51),n(27),n(52),function(e){var t=e.schedules,n=Object(a.useState)("none"),c=Object(s.a)(n,2),i=c[0],u=c[1],l=Object(a.useState)(""),m=Object(s.a)(l,2),h=m[0],f=m[1],d=Object(a.useState)("Classes"),p=Object(s.a)(d,2),v=p[0],b=p[1],E=Object(o.f)(),g=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];Object(a.useEffect)((function(){if(E.pathname.includes("/minyanim"))b("Minyanim"),u("type"),f("minyan");else if(E.pathname.includes("/today")){var e=new Date,t=g[e.getDay()];u("day"),f(t)}}),[g,E.pathname]);var k=Object(a.useCallback)((function(){var e=/\d\d?:\d\d ([AP]M)/,n=[];return t.forEach((function(t){var a=t.rows,r=w(a,"time"),c=a.map((function(e){return e[r]})).filter((function(t){return e.test(t)})).map((function(t){return t.match(e)[0]}));n=n.concat(c)})),Array.from(new Set(n)).sort((function(e,t){var n=new Date("1970/01/01 ".concat(e)),a=new Date("1970/01/01 ".concat(t));return n>a?1:n<a?-1:0}))}),[t]),j=Object(a.useCallback)((function(){var e=[];return t.forEach((function(t){var n=t.rows,a=w(n,"teacher"),r=n.map((function(e){return e[a]}));e=e.concat(r)})),Array.from(new Set(e)).sort()}),[t]);return r.a.createElement(r.a.Fragment,null,"/minyanim"!==E.pathname&&r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("ul",{className:"nav nav-pills nav-justified m-3 w-100"},r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{href:"/#/today",className:E.pathname.includes("/today")?"nav-link active":"nav-link"},"Today's Classes")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{href:"/#/classes",className:E.pathname.includes("/classes")?"nav-link active":"nav-link"},"Full Schedule")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{href:"https://www.youtube.com/channel/UCsHn2xQEscv11QaNHpPf37A",target:"_blank",rel:"noopener noreferrer",className:"nav-link"},"Recordings"))))),r.a.createElement("div",{className:"container"},"/today"===E.pathname&&r.a.createElement(U,{schedules:t,filter:!("none"===i||""===h)&&{type:i,match:h},heading:v})),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-group mt-3 mx-3"},r.a.createElement("label",{htmlFor:"filter",className:"/classes"===E.pathname?"header-title":"hidden"},"Filter By:"," ",r.a.createElement("select",{name:"filter",onChange:function(e){u(e.target.value),f("")},id:"",value:i},r.a.createElement("option",{value:"none"},"No filter"),r.a.createElement("option",{value:"time"},"Time of day"),r.a.createElement("option",{value:"day"},"Day of week"),r.a.createElement("option",{value:"topic"},"Topic"),r.a.createElement("option",{value:"teacher"},"Teacher")),"none"!==i&&("day"===i?r.a.createElement("select",{className:"ml-2",onChange:function(e){return f(e.target.value)}},r.a.createElement("option",{value:""},"Choose Day"),r.a.createElement("option",{value:"mon"},"Mon"),r.a.createElement("option",{value:"tues"},"Tues"),r.a.createElement("option",{value:"wed"},"Wed"),r.a.createElement("option",{value:"thurs"},"Thurs"),r.a.createElement("option",{value:"fri"},"Fri"),r.a.createElement("option",{value:"sun"},"Sun")):"time"===i?r.a.createElement("select",{className:"ml-2",onChange:function(e){return f(e.target.value.toLowerCase())}},r.a.createElement("option",{value:""},"Choose Time"),k().map((function(e){return r.a.createElement("option",{value:e},e)}))):"teacher"===i?r.a.createElement("select",{className:"ml-2",onChange:function(e){return f(e.target.value.toLowerCase())}},r.a.createElement("option",{value:""},"Choose Teacher"),j().map((function(e){return r.a.createElement("option",{value:e},e)}))):r.a.createElement("input",{type:"text",className:"ml-2",onChange:function(e){return f(e.target.value.toLowerCase())},placeholder:"Enter ".concat(i,"(s)")}))))),"/today"!==E.pathname&&t.map((function(e,t){return r.a.createElement(y,{key:t,schedule:e,filter:!("none"===i||""===h)&&{type:i,match:h}})}))))}),H=function(){var e=Object(a.useState)([]),t=Object(s.a)(e,2),n=t[0],c=t[1];return Object(a.useEffect)((function(){_.onSchedulesChanged((function(e){c([{title:"All Schedules",rows:e}])}))}),[]),r.a.createElement(G,{schedules:n})},P=function(){var e=Object(o.e)();return Object(a.useEffect)((function(){return e.listen((function(e){u.a.pageview(e.pathname)}))}),[e]),null},J=function(){return r.a.createElement(l.a,null,r.a.createElement(P,null),r.a.createElement(H,null))},K=function(){return r.a.createElement(J,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.initialize("UA-164561407-1"),i.a.render(r.a.createElement(K,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[54,1,2]]]);
//# sourceMappingURL=main.6e4c87ab.chunk.js.map